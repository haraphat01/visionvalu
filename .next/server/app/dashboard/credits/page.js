(()=>{var e={};e.id=52,e.ids=[52],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},91739:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c}),t(47136),t(4817),t(35866);var r=t(23191),a=t(88716),i=t(37922),l=t.n(i),n=t(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["dashboard",{children:["credits",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,47136)),"/Users/macbook/Desktop/Projects/visionvalu/app/dashboard/credits/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4817)),"/Users/macbook/Desktop/Projects/visionvalu/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/macbook/Desktop/Projects/visionvalu/app/dashboard/credits/page.tsx"],x="/dashboard/credits/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/credits/page",pathname:"/dashboard/credits",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4286:(e,s,t)=>{Promise.resolve().then(t.bind(t,93945)),Promise.resolve().then(t.bind(t,54604))},93945:(e,s,t)=>{"use strict";t.d(s,{default:()=>x});var r=t(10326),a=t(17577),i=t(96523),l=t(13783),n=t(62881);let d=(0,n.Z)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),c=(0,n.Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var o=t(48998);function x(){let{data:e,isLoading:s}=(0,i.a)(),[t,n]=(0,a.useState)([]),[x,m]=(0,a.useState)([]),[u,h]=(0,a.useState)(!0),[p,g]=(0,a.useState)(null),[j,b]=(0,a.useState)(null),v=async e=>{g(e),b(null);try{let s=await fetch("/api/credits/purchase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageId:e})}),t=await s.json();s.ok?window.location.href=t.url||`https://checkout.stripe.com/c/pay/${t.sessionId}`:b({type:"error",text:t.error||"Failed to initiate payment. Please try again."})}catch(e){console.error("Error purchasing credits:",e),b({type:"error",text:"An unexpected error occurred. Please try again."})}finally{g(null)}};return r.jsx("div",{className:"space-y-8",children:(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-gray-200/50 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-8 py-6 border-b border-gray-200/50",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center",children:r.jsx(l.Z,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold gradient-text mb-1",children:"Credits Management"}),r.jsx("p",{className:"text-gray-600",children:"Manage your credits and view your transaction history"})]})]})}),(0,r.jsxs)("div",{className:"px-8 py-6",children:[j&&r.jsx("div",{className:`mb-6 p-4 rounded-lg ${"success"===j.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:(0,r.jsxs)("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:"success"===j.type?r.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):r.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm font-medium",children:j.text})}),r.jsx("div",{className:"ml-auto pl-3",children:r.jsx("div",{className:"-mx-1.5 -my-1.5",children:(0,r.jsxs)("button",{type:"button",className:`inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 ${"success"===j.type?"text-green-500 hover:bg-green-100 focus:ring-green-600":"text-red-500 hover:bg-red-100 focus:ring-red-600"}`,onClick:()=>b(null),children:[r.jsx("span",{className:"sr-only",children:"Dismiss"}),r.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})})]})}),r.jsx("div",{className:"mb-8 p-8 bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 border border-blue-200/50 rounded-2xl hover:shadow-lg transition-all duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center",children:r.jsx(l.Z,{className:"h-8 w-8 text-white"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-4xl font-bold gradient-text mb-2",children:e?.credits||0}),r.jsx("p",{className:"text-lg text-gray-600 font-medium",children:"Credits Available"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Each valuation uses 5 credits"})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Estimated valuations"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Math.floor((e?.credits||0)/5)})]})]})}),(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Purchase Credits"}),u||s?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"spinner w-12 h-12 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading packages..."})]}):r.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:x.map(e=>(0,r.jsxs)("div",{className:`card-elevated relative overflow-hidden ${e.popular?"ring-2 ring-blue-500 bg-gradient-to-br from-blue-50 to-indigo-50":""}`,children:[e.popular&&r.jsx("div",{className:"absolute top-0 right-0 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-1 text-sm font-semibold rounded-bl-lg",children:"Most Popular"}),(0,r.jsxs)("div",{className:"text-center pt-4",children:[r.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-3",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center justify-center mb-6",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl flex items-center justify-center mr-3",children:r.jsx(l.Z,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-4xl font-bold gradient-text",children:e.credits}),r.jsx("span",{className:"text-gray-500 ml-1 text-lg",children:"credits"})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,r.jsxs)("span",{className:"text-3xl font-bold text-gray-900",children:["$",(e.price_cents/100).toFixed(0)]}),e.original_price_cents&&(0,r.jsxs)("span",{className:"text-lg text-gray-500 line-through",children:["$",(e.original_price_cents/100).toFixed(0)]})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[Math.floor(e.credits/5)," valuations"]}),e.original_price_cents&&r.jsx("div",{className:"mt-2",children:(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-green-100 text-green-800 text-xs font-medium",children:["Save $",((e.original_price_cents-e.price_cents)/100).toFixed(0)]})})]}),r.jsx("button",{onClick:()=>v(e.id),disabled:p===e.id,className:`w-full font-semibold py-3 px-6 rounded-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed hover-lift ${e.popular?"btn-primary":"btn-outline"}`,children:p===e.id?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"spinner w-5 h-5 mr-2"}),"Processing..."]}):"Purchase Now"})]})]},e.id))})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Transaction History"}),u||s?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"spinner w-12 h-12 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading transactions..."})]}):t.length>0?r.jsx("div",{className:"space-y-4",children:t.map(e=>r.jsx("div",{className:"card hover:shadow-md transition-shadow duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${"spent"===e.type?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:"spent"===e.type?r.jsx(d,{className:"h-6 w-6"}):r.jsx(c,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900 text-lg",children:e.description}),r.jsx("p",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:`text-2xl font-bold ${"spent"===e.type?"text-red-600":"text-green-600"}`,children:["spent"===e.type?"-":"+",Math.abs(e.amount)]}),r.jsx("p",{className:"text-sm text-gray-500 capitalize font-medium",children:e.type})]})]})},e.id))}):(0,r.jsxs)("div",{className:"text-center py-16",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(o.Z,{className:"h-10 w-10 text-gray-400"})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No transactions yet"}),r.jsx("p",{className:"text-gray-500 mb-6",children:"Your credit transactions will appear here once you make a purchase or use credits."}),r.jsx("button",{onClick:()=>document.querySelector('[data-section="purchase"]')?.scrollIntoView({behavior:"smooth"}),className:"btn-outline",children:"Purchase Credits"})]})]})]})]})})}},96523:(e,s,t)=>{"use strict";t.d(s,{a:()=>i});var r=t(20108),a=t(42945);function i(){let e=(0,a.e)();return(0,r.a)({queryKey:["user"],queryFn:async()=>{let{data:{user:s},error:t}=await e.auth.getUser();if(t||!s)return null;let{data:r,error:a}=await e.from("users").select("*").eq("id",s.id).single();return a?(console.error("Error fetching user profile:",a),null):r},staleTime:3e5,refetchOnWindowFocus:!1})}},47136:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(19510),a=t(19692),i=t(58585),l=t(31812);let n=(0,t(68570).createProxy)(String.raw`/Users/macbook/Desktop/Projects/visionvalu/components/dashboard/CreditsSection.tsx#default`);async function d(){let e=await (0,a.e)(),{data:{user:s},error:t}=await e.auth.getUser();return(t||!s)&&(0,i.redirect)("/login"),r.jsx(l.Z,{children:r.jsx(n,{})})}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,456,14,330,600],()=>t(91739));module.exports=r})();