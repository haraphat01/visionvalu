/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/valuation/route";
exports.ids = ["app/api/valuation/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ "node:https":
/*!*****************************!*\
  !*** external "node:https" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:https");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:net");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvaluation%2Froute&page=%2Fapi%2Fvaluation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvaluation%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvaluation%2Froute&page=%2Fapi%2Fvaluation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvaluation%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_macbook_Desktop_Projects_visionvalu_ai_property_valuation_app_api_valuation_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/valuation/route.ts */ \"(rsc)/./app/api/valuation/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/valuation/route\",\n        pathname: \"/api/valuation\",\n        filename: \"route\",\n        bundlePath: \"app/api/valuation/route\"\n    },\n    resolvedPagePath: \"/Users/macbook/Desktop/Projects/visionvalu_-ai-property-valuation/app/api/valuation/route.ts\",\n    nextConfigOutput,\n    userland: _Users_macbook_Desktop_Projects_visionvalu_ai_property_valuation_app_api_valuation_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/valuation/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ2YWx1YXRpb24lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnZhbHVhdGlvbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnZhbHVhdGlvbiUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1hY2Jvb2slMkZEZXNrdG9wJTJGUHJvamVjdHMlMkZ2aXNpb252YWx1Xy1haS1wcm9wZXJ0eS12YWx1YXRpb24lMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbWFjYm9vayUyRkRlc2t0b3AlMkZQcm9qZWN0cyUyRnZpc2lvbnZhbHVfLWFpLXByb3BlcnR5LXZhbHVhdGlvbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDNEM7QUFDekg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXNpb252YWx1LWFpLXByb3BlcnR5LXZhbHVhdGlvbi8/MDI5NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvbWFjYm9vay9EZXNrdG9wL1Byb2plY3RzL3Zpc2lvbnZhbHVfLWFpLXByb3BlcnR5LXZhbHVhdGlvbi9hcHAvYXBpL3ZhbHVhdGlvbi9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdmFsdWF0aW9uL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdmFsdWF0aW9uXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS92YWx1YXRpb24vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvbWFjYm9vay9EZXNrdG9wL1Byb2plY3RzL3Zpc2lvbnZhbHVfLWFpLXByb3BlcnR5LXZhbHVhdGlvbi9hcHAvYXBpL3ZhbHVhdGlvbi9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdmFsdWF0aW9uL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvaluation%2Froute&page=%2Fapi%2Fvaluation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvaluation%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/valuation/route.ts":
/*!************************************!*\
  !*** ./app/api/valuation/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase/server */ \"(rsc)/./lib/supabase/server.ts\");\n/* harmony import */ var _services_geminiService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/services/geminiService */ \"(rsc)/./services/geminiService.ts\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist-node/v4.js\");\n\n\n\n\nasync function POST(request) {\n    const supabase = await (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.createClient)();\n    const { data: { user }, error: authError } = await supabase.auth.getUser();\n    if (authError || !user) {\n        return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n            error: \"Unauthorized\"\n        }, {\n            status: 401\n        });\n    }\n    const body = await request.json();\n    const { images, propertyDetails } = body;\n    // Check if user has enough credits (5 credits per valuation)\n    const { data: userData, error: userError } = await supabase.from(\"users\").select(\"credits\").eq(\"id\", user.id).single();\n    if (userError || !userData) {\n        return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n            error: \"User not found\"\n        }, {\n            status: 404\n        });\n    }\n    if (userData.credits < 5) {\n        return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n            error: \"Insufficient credits. You need 5 credits for a property valuation.\",\n            creditsNeeded: 5 - userData.credits\n        }, {\n            status: 400\n        });\n    }\n    try {\n        // Get valuation from Gemini\n        const valuationData = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_1__.getPropertyValuation)(images, propertyDetails);\n        const newReport = {\n            ...valuationData,\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(),\n            timestamp: new Date().toISOString(),\n            previewImage: `data:image/jpeg;base64,${images[0]}`,\n            propertyDetails: propertyDetails,\n            userId: user.id\n        };\n        // Save the report\n        const { data: savedReport, error: reportError } = await supabase.from(\"reports\").insert({\n            user_id: user.id,\n            report_data: newReport,\n            created_at: new Date().toISOString()\n        }).select().single();\n        if (reportError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n                error: reportError.message\n            }, {\n                status: 500\n            });\n        }\n        // Deduct 5 credits using the database function\n        const { error: spendCreditsError } = await supabase.rpc(\"spend_credits\", {\n            user_id: user.id,\n            amount: 5,\n            description: \"Property valuation report\"\n        });\n        if (spendCreditsError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n                error: spendCreditsError.message\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n            report: newReport\n        });\n    } catch (error) {\n        console.error(\"Error getting valuation:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n            error: \"Failed to get property valuation\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFSixPQUFPO1FBQW1DLEdBQzVDO1lBQUVLLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmlzaW9udmFsdS1haS1wcm9wZXJ0eS12YWx1YXRpb24vLi9hcHAvYXBpL3ZhbHVhdGlvbi9yb3V0ZS50cz82OTEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0AvbGliL3N1cGFiYXNlL3NlcnZlcidcbmltcG9ydCB7IGdldFByb3BlcnR5VmFsdWF0aW9uIH0gZnJvbSAnQC9zZXJ2aWNlcy9nZW1pbmlTZXJ2aWNlJ1xuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJ1xuaW1wb3J0IHR5cGUgeyBQcm9wZXJ0eURldGFpbHMsIFZhbHVhdGlvblJlc3VsdCB9IGZyb20gJ0AvdHlwZXMnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKVxuICBcbiAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3I6IGF1dGhFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKClcbiAgXG4gIGlmIChhdXRoRXJyb3IgfHwgIXVzZXIpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICB9XG5cbiAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gIGNvbnN0IHsgaW1hZ2VzLCBwcm9wZXJ0eURldGFpbHMgfSA9IGJvZHkgYXMgeyBcbiAgICBpbWFnZXM6IHN0cmluZ1tdXG4gICAgcHJvcGVydHlEZXRhaWxzOiBQcm9wZXJ0eURldGFpbHMgXG4gIH1cblxuICAvLyBDaGVjayBpZiB1c2VyIGhhcyBlbm91Z2ggY3JlZGl0cyAoNSBjcmVkaXRzIHBlciB2YWx1YXRpb24pXG4gIGNvbnN0IHsgZGF0YTogdXNlckRhdGEsIGVycm9yOiB1c2VyRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3VzZXJzJylcbiAgICAuc2VsZWN0KCdjcmVkaXRzJylcbiAgICAuZXEoJ2lkJywgdXNlci5pZClcbiAgICAuc2luZ2xlKClcblxuICBpZiAodXNlckVycm9yIHx8ICF1c2VyRGF0YSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0sIHsgc3RhdHVzOiA0MDQgfSlcbiAgfVxuXG4gIGlmICh1c2VyRGF0YS5jcmVkaXRzIDwgNSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgZXJyb3I6ICdJbnN1ZmZpY2llbnQgY3JlZGl0cy4gWW91IG5lZWQgNSBjcmVkaXRzIGZvciBhIHByb3BlcnR5IHZhbHVhdGlvbi4nLFxuICAgICAgY3JlZGl0c05lZWRlZDogNSAtIHVzZXJEYXRhLmNyZWRpdHNcbiAgICB9LCB7IHN0YXR1czogNDAwIH0pXG4gIH1cblxuICB0cnkge1xuICAgIC8vIEdldCB2YWx1YXRpb24gZnJvbSBHZW1pbmlcbiAgICBjb25zdCB2YWx1YXRpb25EYXRhID0gYXdhaXQgZ2V0UHJvcGVydHlWYWx1YXRpb24oaW1hZ2VzLCBwcm9wZXJ0eURldGFpbHMpXG5cbiAgICBjb25zdCBuZXdSZXBvcnQ6IFZhbHVhdGlvblJlc3VsdCA9IHtcbiAgICAgIC4uLnZhbHVhdGlvbkRhdGEsXG4gICAgICBpZDogdXVpZHY0KCksXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHByZXZpZXdJbWFnZTogYGRhdGE6aW1hZ2UvanBlZztiYXNlNjQsJHtpbWFnZXNbMF19YCxcbiAgICAgIHByb3BlcnR5RGV0YWlsczogcHJvcGVydHlEZXRhaWxzLFxuICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgIH1cblxuICAgIC8vIFNhdmUgdGhlIHJlcG9ydFxuICAgIGNvbnN0IHsgZGF0YTogc2F2ZWRSZXBvcnQsIGVycm9yOiByZXBvcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdyZXBvcnRzJylcbiAgICAgIC5pbnNlcnQoe1xuICAgICAgICB1c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgICByZXBvcnRfZGF0YTogbmV3UmVwb3J0LFxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9KVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKClcblxuICAgIGlmIChyZXBvcnRFcnJvcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IHJlcG9ydEVycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICAgIH1cblxuICAgIC8vIERlZHVjdCA1IGNyZWRpdHMgdXNpbmcgdGhlIGRhdGFiYXNlIGZ1bmN0aW9uXG4gICAgY29uc3QgeyBlcnJvcjogc3BlbmRDcmVkaXRzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYygnc3BlbmRfY3JlZGl0cycsIHtcbiAgICAgIHVzZXJfaWQ6IHVzZXIuaWQsXG4gICAgICBhbW91bnQ6IDUsXG4gICAgICBkZXNjcmlwdGlvbjogJ1Byb3BlcnR5IHZhbHVhdGlvbiByZXBvcnQnXG4gICAgfSlcblxuICAgIGlmIChzcGVuZENyZWRpdHNFcnJvcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IHNwZW5kQ3JlZGl0c0Vycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHJlcG9ydDogbmV3UmVwb3J0IH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB2YWx1YXRpb246JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBnZXQgcHJvcGVydHkgdmFsdWF0aW9uJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiZ2V0UHJvcGVydHlWYWx1YXRpb24iLCJOZXh0UmVzcG9uc2UiLCJ2NCIsInV1aWR2NCIsIlBPU1QiLCJyZXF1ZXN0Iiwic3VwYWJhc2UiLCJkYXRhIiwidXNlciIsImVycm9yIiwiYXV0aEVycm9yIiwiYXV0aCIsImdldFVzZXIiLCJqc29uIiwic3RhdHVzIiwiYm9keSIsImltYWdlcyIsInByb3BlcnR5RGV0YWlscyIsInVzZXJEYXRhIiwidXNlckVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwiaWQiLCJzaW5nbGUiLCJjcmVkaXRzIiwiY3JlZGl0c05lZWRlZCIsInZhbHVhdGlvbkRhdGEiLCJuZXdSZXBvcnQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwcmV2aWV3SW1hZ2UiLCJ1c2VySWQiLCJzYXZlZFJlcG9ydCIsInJlcG9ydEVycm9yIiwiaW5zZXJ0IiwidXNlcl9pZCIsInJlcG9ydF9kYXRhIiwiY3JlYXRlZF9hdCIsIm1lc3NhZ2UiLCJzcGVuZENyZWRpdHNFcnJvciIsInJwYyIsImFtb3VudCIsImRlc2NyaXB0aW9uIiwicmVwb3J0IiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/valuation/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase/server.ts":
/*!********************************!*\
  !*** ./lib/supabase/server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createClient: () => (/* binding */ createClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\nasync function createClient() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://bbbengshbvpqxtzrphov.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiYmVuZ3NoYnZwcXh0enJwaG92Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEzNzcxNjYsImV4cCI6MjA3Njk1MzE2Nn0.CkmmMBMjbQlJgsgMjRLGfjE6fO-BXiis8nZflT16VX8\", {\n        cookies: {\n            getAll () {\n                return cookieStore.getAll();\n            },\n            setAll (cookiesToSet) {\n                try {\n                    cookiesToSet.forEach(({ name, value, options })=>cookieStore.set(name, value, options));\n                } catch  {\n                // The `setAll` method was called from a Server Component.\n                // This can be ignored if you have middleware refreshing\n                // user sessions.\n                }\n            }\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Uvc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFrRDtBQUNaO0FBRS9CLGVBQWVFO0lBQ3BCLE1BQU1DLGNBQWMsTUFBTUYscURBQU9BO0lBRWpDLE9BQU9ELGlFQUFrQkEsQ0FDdkJJLDBDQUFvQyxFQUNwQ0Esa05BQXlDLEVBQ3pDO1FBQ0VILFNBQVM7WUFDUE87Z0JBQ0UsT0FBT0wsWUFBWUssTUFBTTtZQUMzQjtZQUNBQyxRQUFPQyxZQUFZO2dCQUNqQixJQUFJO29CQUNGQSxhQUFhQyxPQUFPLENBQUMsQ0FBQyxFQUFFQyxJQUFJLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxFQUFFLEdBQzVDWCxZQUFZWSxHQUFHLENBQUNILE1BQU1DLE9BQU9DO2dCQUVqQyxFQUFFLE9BQU07Z0JBQ04sMERBQTBEO2dCQUMxRCx3REFBd0Q7Z0JBQ3hELGlCQUFpQjtnQkFDbkI7WUFDRjtRQUNGO0lBQ0Y7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Zpc2lvbnZhbHUtYWktcHJvcGVydHktdmFsdWF0aW9uLy4vbGliL3N1cGFiYXNlL3NlcnZlci50cz82NjI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zc3InXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQ2xpZW50KCkge1xuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKVxuXG4gIHJldHVybiBjcmVhdGVTZXJ2ZXJDbGllbnQoXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSEsXG4gICAge1xuICAgICAgY29va2llczoge1xuICAgICAgICBnZXRBbGwoKSB7XG4gICAgICAgICAgcmV0dXJuIGNvb2tpZVN0b3JlLmdldEFsbCgpXG4gICAgICAgIH0sXG4gICAgICAgIHNldEFsbChjb29raWVzVG9TZXQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29va2llc1RvU2V0LmZvckVhY2goKHsgbmFtZSwgdmFsdWUsIG9wdGlvbnMgfSkgPT5cbiAgICAgICAgICAgICAgY29va2llU3RvcmUuc2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgLy8gVGhlIGBzZXRBbGxgIG1ldGhvZCB3YXMgY2FsbGVkIGZyb20gYSBTZXJ2ZXIgQ29tcG9uZW50LlxuICAgICAgICAgICAgLy8gVGhpcyBjYW4gYmUgaWdub3JlZCBpZiB5b3UgaGF2ZSBtaWRkbGV3YXJlIHJlZnJlc2hpbmdcbiAgICAgICAgICAgIC8vIHVzZXIgc2Vzc2lvbnMuXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9XG4gIClcbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJjb29raWVzIiwiY3JlYXRlQ2xpZW50IiwiY29va2llU3RvcmUiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJnZXRBbGwiLCJzZXRBbGwiLCJjb29raWVzVG9TZXQiLCJmb3JFYWNoIiwibmFtZSIsInZhbHVlIiwib3B0aW9ucyIsInNldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase/server.ts\n");

/***/ }),

/***/ "(rsc)/./services/geminiService.ts":
/*!***********************************!*\
  !*** ./services/geminiService.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateDetailedReport: () => (/* binding */ generateDetailedReport),\n/* harmony export */   getPropertyValuation: () => (/* binding */ getPropertyValuation)\n/* harmony export */ });\n/* harmony import */ var _google_genai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/genai */ \"(rsc)/./node_modules/@google/genai/dist/node/index.mjs\");\n\nconst API_KEY = \"AIzaSyDefnzV2zmVTS-mGUjliQI7grypJhfsdDk\";\nif (!API_KEY) {\n    throw new Error(\"GEMINI_API_KEY environment variable not set.\");\n}\nconst ai = new _google_genai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenAI({\n    apiKey: API_KEY\n});\nconst valuationSchema = {\n    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.OBJECT,\n    properties: {\n        estimatedValueRange: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.OBJECT,\n            properties: {\n                min: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.NUMBER,\n                    description: \"The minimum estimated value.\"\n                },\n                max: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.NUMBER,\n                    description: \"The maximum estimated value.\"\n                }\n            },\n            required: [\n                \"min\",\n                \"max\"\n            ]\n        },\n        confidenceScore: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.NUMBER,\n            description: \"A score from 0 to 100 representing the confidence in the valuation.\"\n        },\n        currency: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n            description: \"The currency of the valuation (e.g., USD, EUR, NGN). Default to USD if not obvious.\"\n        },\n        reasoning: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n            description: \"A detailed, paragraph-long explanation for the valuation, considering all visual cues and provided data.\"\n        },\n        detectedFeatures: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.ARRAY,\n            items: {\n                type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n            },\n            description: \"A list of key visual features detected (e.g., 'Modern kitchen with granite countertops', 'Large backyard with swimming pool', 'Hardwood flooring').\"\n        },\n        propertyType: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n            description: \"The type of property (e.g., 'Single-Family Home', 'Apartment', 'Duplex', 'Commercial Building').\"\n        },\n        propertyCondition: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n            description: \"The overall condition of the property (e.g., 'Excellent', 'Good', 'Fair', 'Needs Renovation').\"\n        },\n        suggestedUpgrades: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.ARRAY,\n            description: \"A list of suggested upgrades or repairs to increase the property's value, including reasoning.\",\n            items: {\n                type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.OBJECT,\n                properties: {\n                    upgrade: {\n                        type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                        description: \"The specific upgrade or repair suggested (e.g., 'Modernize Kitchen Appliances').\"\n                    },\n                    reasoning: {\n                        type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                        description: \"Why this upgrade is recommended based on the images and market standards.\"\n                    },\n                    estimatedCost: {\n                        type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                        description: \"A rough estimate of the cost involved ('Low', 'Medium', 'High').\"\n                    },\n                    impactOnValue: {\n                        type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                        description: \"The potential impact on the property's value ('Low', 'Medium', 'High').\"\n                    }\n                },\n                required: [\n                    \"upgrade\",\n                    \"reasoning\",\n                    \"estimatedCost\",\n                    \"impactOnValue\"\n                ]\n            }\n        }\n    },\n    required: [\n        \"estimatedValueRange\",\n        \"confidenceScore\",\n        \"currency\",\n        \"reasoning\",\n        \"detectedFeatures\",\n        \"propertyType\",\n        \"propertyCondition\",\n        \"suggestedUpgrades\"\n    ]\n};\nconst getPropertyValuation = async (images, details)=>{\n    const imageParts = images.map((base64Data)=>({\n            inlineData: {\n                mimeType: \"image/jpeg\",\n                data: base64Data\n            }\n        }));\n    const prompt = `\n    Analyze the following property images and details as an expert real estate appraiser. \n    \n    Property Details Provided:\n    - Address/Location: ${details.address || \"Not provided\"}\n    - Property Size: ${details.propertySize ? `${details.propertySize} sqft` : \"Not provided\"}\n    - Bedrooms: ${details.bedrooms || \"Not provided\"}\n    - Bathrooms: ${details.bathrooms || \"Not provided\"}\n    - Additional Notes: ${details.additionalNotes || \"None\"}\n\n    **Crucial Instructions:**\n    1.  **If an address is provided:** Your most important task is to use the Google Search tool to find recent, comparable property sales data (\"comps\") for that specific address and neighborhood. \n    2.  **Analyze and Compare:** Your valuation MUST be heavily based on comparing the provided property (images and details) against the real-world sales data of the comps you find. Note key similarities and differences (e.g., square footage, condition, amenities) in your reasoning.\n    3.  **If no address is provided:** Base your valuation on the visual evidence and assume a standard, average market for a property of this type.\n\n    Based on this analysis, provide a comprehensive valuation. Also, identify key areas for improvement with suggested upgrades that could increase the property's market value.\n\n    **Output Format:**\n    Provide your complete response as a single, valid JSON object. Do not add any text, comments, or markdown formatting (like \\`\\`\\`json) before or after the JSON object. The JSON object must strictly adhere to the following structure:\n\n    {\n      \"estimatedValueRange\": { \"min\": number, \"max\": number },\n      \"confidenceScore\": number (a score from 0 to 100),\n      \"currency\": string (e.g., \"USD\"),\n      \"reasoning\": string (a detailed, paragraph-long explanation),\n      \"detectedFeatures\": string[] (a list of key visual features detected),\n      \"propertyType\": string (e.g., \"Single-Family Home\", \"Apartment\"),\n      \"propertyCondition\": string (e.g., \"Excellent\", \"Good\", \"Needs Renovation\"),\n      \"suggestedUpgrades\": [\n        {\n          \"upgrade\": string,\n          \"reasoning\": string,\n          \"estimatedCost\": string (\"Low\", \"Medium\", or \"High\"),\n          \"impactOnValue\": string (\"Low\", \"Medium\", or \"High\")\n        }\n      ]\n    }\n  `;\n    const useGrounding = details.address && details.address.trim() !== \"\";\n    try {\n        const config = useGrounding ? {\n            tools: [\n                {\n                    googleSearch: {}\n                }\n            ]\n        } : {\n            responseMimeType: \"application/json\",\n            responseSchema: valuationSchema\n        };\n        const response = await ai.models.generateContent({\n            model: \"gemini-2.5-flash\",\n            contents: {\n                parts: [\n                    ...imageParts,\n                    {\n                        text: prompt\n                    }\n                ]\n            },\n            config\n        });\n        if (!response.text) {\n            throw new Error(\"No response text received from AI service.\");\n        }\n        const jsonText = response.text.trim();\n        // If grounding is used, the model might wrap the JSON in markdown backticks.\n        const cleanJsonText = jsonText.replace(/^```json\\s*|```$/g, \"\");\n        const valuationData = JSON.parse(cleanJsonText);\n        if (!valuationData.estimatedValueRange || !valuationData.reasoning) {\n            throw new Error(\"Incomplete valuation data received from AI.\");\n        }\n        if (useGrounding) {\n            const groundingChunks = response.candidates?.[0]?.groundingMetadata?.groundingChunks;\n            const sources = groundingChunks?.map((chunk)=>chunk.web).filter((web)=>!!web && !!web.uri && !!web.title) || [];\n            return {\n                ...valuationData,\n                sources\n            };\n        }\n        return valuationData;\n    } catch (error) {\n        console.error(\"Error calling Gemini API:\", error);\n        if (error instanceof Error) {\n            throw new Error(`Failed to get property valuation: ${error.message}`);\n        }\n        throw new Error(\"An unknown error occurred during property valuation.\");\n    }\n};\nconst generateDetailedReport = async (valuation)=>{\n    const prompt = `\n    As a professional real estate analyst, synthesize the following structured data into a comprehensive, well-written, client-facing report. The tone should be professional, informative, and persuasive. The report should be formatted with clear headings using Markdown for structure (e.g., \"## Executive Summary\").\n\n    **Valuation Data:**\n    - Property Type: ${valuation.propertyType}\n    - Address: ${valuation.propertyDetails?.address || \"Not specified\"}\n    - Property Size: ${valuation.propertyDetails?.propertySize ? `${valuation.propertyDetails.propertySize} sqft` : \"Not specified\"}\n    - Bedrooms: ${valuation.propertyDetails?.bedrooms || \"Not specified\"}\n    - Bathrooms: ${valuation.propertyDetails?.bathrooms || \"Not specified\"}\n    - Estimated Value Range: ${valuation.estimatedValueRange.min} - ${valuation.estimatedValueRange.max} ${valuation.currency}\n    - AI's Reasoning for Valuation: ${valuation.reasoning}\n    - Detected Features: ${valuation.detectedFeatures.join(\", \")}\n    - Overall Condition: ${valuation.propertyCondition}\n    - Suggested Upgrades:\n      ${valuation.suggestedUpgrades.map((u)=>`  - ${u.upgrade}: ${u.reasoning} (Estimated Cost: ${u.estimatedCost}, Impact on Value: ${u.impactOnValue})`).join(\"\\n\")}\n    - Web Sources Consulted:\n      ${valuation.sources && valuation.sources.length > 0 ? valuation.sources.map((s)=>`  - [${s.title}](${s.uri})`).join(\"\\n\") : \"None\"}\n\n    **Report Structure:**\n    Create a report with the following sections:\n    \n    1.  **## Executive Summary:** Start with a brief, high-level overview of the property, its estimated value, and key findings.\n    2.  **## Property Overview:** Describe the property in detail, using the detected features, property type, and condition. Make it sound appealing but realistic.\n    3.  **## Market & Valuation Analysis:** Elaborate on the reasoning behind the valuation. If web sources were consulted, explain how the property compares to the local market based on those comps.\n    4.  **## Path to Increased Value:** Frame the \"Suggested Upgrades\" as a strategic investment plan. For each upgrade, explain the potential return on investment in a compelling way.\n    5.  **## Conclusion & Disclaimer:** End with a concluding paragraph summarizing the property's potential. Include a brief disclaimer that this is an AI-generated estimate and a professional in-person appraisal is recommended for final decisions.\n\n    Generate only the text for the report.\n  `;\n    try {\n        const response = await ai.models.generateContent({\n            model: \"gemini-2.5-flash\",\n            contents: prompt\n        });\n        if (!response.text) {\n            throw new Error(\"No response text received from AI service.\");\n        }\n        return response.text;\n    } catch (error) {\n        console.error(\"Error generating detailed report:\", error);\n        if (error instanceof Error) {\n            throw new Error(`Failed to generate detailed report: ${error.message}`);\n        }\n        throw new Error(\"An unknown error occurred while generating the report.\");\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YSxDQUFDLENBQUMsQ0FBQyxFQUFFbUQsSUFBSSxDQUFDLE1BQU07O01BRWhLLEVBQUUsVUFBV1osT0FBTyxJQUFJVSxVQUFVVixPQUFPLENBQUNjLE1BQU0sR0FBRyxJQUFLSixVQUFVVixPQUFPLENBQUNsQyxHQUFHLENBQUNpRCxDQUFBQSxJQUFLLENBQUMsS0FBSyxFQUFFQSxFQUFFVixLQUFLLENBQUMsRUFBRSxFQUFFVSxFQUFFWCxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUVRLElBQUksQ0FBQyxRQUFRLE9BQU87Ozs7Ozs7Ozs7OztFQVl6SSxDQUFDO0lBRUQsSUFBSTtRQUNGLE1BQU01QixXQUFXLE1BQU0vQyxHQUFHZ0QsTUFBTSxDQUFDQyxlQUFlLENBQUM7WUFDL0NDLE9BQU87WUFDUEMsVUFBVWpCO1FBQ1o7UUFFQSxJQUFJLENBQUNhLFNBQVNNLElBQUksRUFBRTtZQUNsQixNQUFNLElBQUl0RCxNQUFNO1FBQ2xCO1FBRUEsT0FBT2dELFNBQVNNLElBQUk7SUFDdEIsRUFBRSxPQUFPZ0IsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMscUNBQXFDQTtRQUNuRCxJQUFJQSxpQkFBaUJ0RSxPQUFPO1lBQ3hCLE1BQU0sSUFBSUEsTUFBTSxDQUFDLG9DQUFvQyxFQUFFc0UsTUFBTUUsT0FBTyxDQUFDLENBQUM7UUFDMUU7UUFDQSxNQUFNLElBQUl4RSxNQUFNO0lBQ2xCO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3Zpc2lvbnZhbHUtYWktcHJvcGVydHktdmFsdWF0aW9uLy4vc2VydmljZXMvZ2VtaW5pU2VydmljZS50cz9kMmEzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdvb2dsZUdlbkFJLCBUeXBlIH0gZnJvbSBcIkBnb29nbGUvZ2VuYWlcIjtcbmltcG9ydCB0eXBlIHsgVmFsdWF0aW9uUmVzdWx0LCBQcm9wZXJ0eURldGFpbHMsIEdyb3VuZGluZ1NvdXJjZSB9IGZyb20gJy4uL3R5cGVzJztcblxuY29uc3QgQVBJX0tFWSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dFTUlOSV9BUElfS0VZO1xuXG5pZiAoIUFQSV9LRVkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFwiR0VNSU5JX0FQSV9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUgbm90IHNldC5cIik7XG59XG5cbmNvbnN0IGFpID0gbmV3IEdvb2dsZUdlbkFJKHsgYXBpS2V5OiBBUElfS0VZIH0pO1xuXG5jb25zdCB2YWx1YXRpb25TY2hlbWEgPSB7XG4gIHR5cGU6IFR5cGUuT0JKRUNULFxuICBwcm9wZXJ0aWVzOiB7XG4gICAgZXN0aW1hdGVkVmFsdWVSYW5nZToge1xuICAgICAgdHlwZTogVHlwZS5PQkpFQ1QsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIG1pbjogeyB0eXBlOiBUeXBlLk5VTUJFUiwgZGVzY3JpcHRpb246IFwiVGhlIG1pbmltdW0gZXN0aW1hdGVkIHZhbHVlLlwiIH0sXG4gICAgICAgIG1heDogeyB0eXBlOiBUeXBlLk5VTUJFUiwgZGVzY3JpcHRpb246IFwiVGhlIG1heGltdW0gZXN0aW1hdGVkIHZhbHVlLlwiIH0sXG4gICAgICB9LFxuICAgICAgcmVxdWlyZWQ6IFtcIm1pblwiLCBcIm1heFwiXSxcbiAgICB9LFxuICAgIGNvbmZpZGVuY2VTY29yZToge1xuICAgICAgdHlwZTogVHlwZS5OVU1CRVIsXG4gICAgICBkZXNjcmlwdGlvbjogXCJBIHNjb3JlIGZyb20gMCB0byAxMDAgcmVwcmVzZW50aW5nIHRoZSBjb25maWRlbmNlIGluIHRoZSB2YWx1YXRpb24uXCIsXG4gICAgfSxcbiAgICBjdXJyZW5jeToge1xuICAgICAgdHlwZTogVHlwZS5TVFJJTkcsXG4gICAgICBkZXNjcmlwdGlvbjogXCJUaGUgY3VycmVuY3kgb2YgdGhlIHZhbHVhdGlvbiAoZS5nLiwgVVNELCBFVVIsIE5HTikuIERlZmF1bHQgdG8gVVNEIGlmIG5vdCBvYnZpb3VzLlwiLFxuICAgIH0sXG4gICAgcmVhc29uaW5nOiB7XG4gICAgICB0eXBlOiBUeXBlLlNUUklORyxcbiAgICAgIGRlc2NyaXB0aW9uOiBcIkEgZGV0YWlsZWQsIHBhcmFncmFwaC1sb25nIGV4cGxhbmF0aW9uIGZvciB0aGUgdmFsdWF0aW9uLCBjb25zaWRlcmluZyBhbGwgdmlzdWFsIGN1ZXMgYW5kIHByb3ZpZGVkIGRhdGEuXCIsXG4gICAgfSxcbiAgICBkZXRlY3RlZEZlYXR1cmVzOiB7XG4gICAgICB0eXBlOiBUeXBlLkFSUkFZLFxuICAgICAgaXRlbXM6IHtcbiAgICAgICAgdHlwZTogVHlwZS5TVFJJTkcsXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246IFwiQSBsaXN0IG9mIGtleSB2aXN1YWwgZmVhdHVyZXMgZGV0ZWN0ZWQgKGUuZy4sICdNb2Rlcm4ga2l0Y2hlbiB3aXRoIGdyYW5pdGUgY291bnRlcnRvcHMnLCAnTGFyZ2UgYmFja3lhcmQgd2l0aCBzd2ltbWluZyBwb29sJywgJ0hhcmR3b29kIGZsb29yaW5nJykuXCIsXG4gICAgfSxcbiAgICBwcm9wZXJ0eVR5cGU6IHtcbiAgICAgIHR5cGU6IFR5cGUuU1RSSU5HLFxuICAgICAgZGVzY3JpcHRpb246IFwiVGhlIHR5cGUgb2YgcHJvcGVydHkgKGUuZy4sICdTaW5nbGUtRmFtaWx5IEhvbWUnLCAnQXBhcnRtZW50JywgJ0R1cGxleCcsICdDb21tZXJjaWFsIEJ1aWxkaW5nJykuXCIsXG4gICAgfSxcbiAgICBwcm9wZXJ0eUNvbmRpdGlvbjoge1xuICAgICAgICB0eXBlOiBUeXBlLlNUUklORyxcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIG92ZXJhbGwgY29uZGl0aW9uIG9mIHRoZSBwcm9wZXJ0eSAoZS5nLiwgJ0V4Y2VsbGVudCcsICdHb29kJywgJ0ZhaXInLCAnTmVlZHMgUmVub3ZhdGlvbicpLlwiLFxuICAgIH0sXG4gICAgc3VnZ2VzdGVkVXBncmFkZXM6IHtcbiAgICAgIHR5cGU6IFR5cGUuQVJSQVksXG4gICAgICBkZXNjcmlwdGlvbjogXCJBIGxpc3Qgb2Ygc3VnZ2VzdGVkIHVwZ3JhZGVzIG9yIHJlcGFpcnMgdG8gaW5jcmVhc2UgdGhlIHByb3BlcnR5J3MgdmFsdWUsIGluY2x1ZGluZyByZWFzb25pbmcuXCIsXG4gICAgICBpdGVtczoge1xuICAgICAgICB0eXBlOiBUeXBlLk9CSkVDVCxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHVwZ3JhZGU6IHsgdHlwZTogVHlwZS5TVFJJTkcsIGRlc2NyaXB0aW9uOiBcIlRoZSBzcGVjaWZpYyB1cGdyYWRlIG9yIHJlcGFpciBzdWdnZXN0ZWQgKGUuZy4sICdNb2Rlcm5pemUgS2l0Y2hlbiBBcHBsaWFuY2VzJykuXCIgfSxcbiAgICAgICAgICByZWFzb25pbmc6IHsgdHlwZTogVHlwZS5TVFJJTkcsIGRlc2NyaXB0aW9uOiBcIldoeSB0aGlzIHVwZ3JhZGUgaXMgcmVjb21tZW5kZWQgYmFzZWQgb24gdGhlIGltYWdlcyBhbmQgbWFya2V0IHN0YW5kYXJkcy5cIiB9LFxuICAgICAgICAgIGVzdGltYXRlZENvc3Q6IHsgdHlwZTogVHlwZS5TVFJJTkcsIGRlc2NyaXB0aW9uOiBcIkEgcm91Z2ggZXN0aW1hdGUgb2YgdGhlIGNvc3QgaW52b2x2ZWQgKCdMb3cnLCAnTWVkaXVtJywgJ0hpZ2gnKS5cIiB9LFxuICAgICAgICAgIGltcGFjdE9uVmFsdWU6IHsgdHlwZTogVHlwZS5TVFJJTkcsIGRlc2NyaXB0aW9uOiBcIlRoZSBwb3RlbnRpYWwgaW1wYWN0IG9uIHRoZSBwcm9wZXJ0eSdzIHZhbHVlICgnTG93JywgJ01lZGl1bScsICdIaWdoJykuXCIgfVxuICAgICAgICB9LFxuICAgICAgICByZXF1aXJlZDogW1widXBncmFkZVwiLCBcInJlYXNvbmluZ1wiLCBcImVzdGltYXRlZENvc3RcIiwgXCJpbXBhY3RPblZhbHVlXCJdXG4gICAgICB9XG4gICAgfVxuICB9LFxuICByZXF1aXJlZDogW1xuICAgIFwiZXN0aW1hdGVkVmFsdWVSYW5nZVwiLFxuICAgIFwiY29uZmlkZW5jZVNjb3JlXCIsXG4gICAgXCJjdXJyZW5jeVwiLFxuICAgIFwicmVhc29uaW5nXCIsXG4gICAgXCJkZXRlY3RlZEZlYXR1cmVzXCIsXG4gICAgXCJwcm9wZXJ0eVR5cGVcIixcbiAgICBcInByb3BlcnR5Q29uZGl0aW9uXCIsXG4gICAgXCJzdWdnZXN0ZWRVcGdyYWRlc1wiXG4gIF0sXG59O1xuXG5cbmV4cG9ydCBjb25zdCBnZXRQcm9wZXJ0eVZhbHVhdGlvbiA9IGFzeW5jIChpbWFnZXM6IHN0cmluZ1tdLCBkZXRhaWxzOiBQcm9wZXJ0eURldGFpbHMpOiBQcm9taXNlPE9taXQ8VmFsdWF0aW9uUmVzdWx0LCAnaWQnIHwgJ3RpbWVzdGFtcCcgfCAncHJldmlld0ltYWdlJyB8ICdwcm9wZXJ0eURldGFpbHMnPj4gPT4ge1xuICBjb25zdCBpbWFnZVBhcnRzID0gaW1hZ2VzLm1hcChiYXNlNjREYXRhID0+ICh7XG4gICAgaW5saW5lRGF0YToge1xuICAgICAgbWltZVR5cGU6ICdpbWFnZS9qcGVnJyxcbiAgICAgIGRhdGE6IGJhc2U2NERhdGEsXG4gICAgfSxcbiAgfSkpO1xuXG4gIGNvbnN0IHByb21wdCA9IGBcbiAgICBBbmFseXplIHRoZSBmb2xsb3dpbmcgcHJvcGVydHkgaW1hZ2VzIGFuZCBkZXRhaWxzIGFzIGFuIGV4cGVydCByZWFsIGVzdGF0ZSBhcHByYWlzZXIuIFxuICAgIFxuICAgIFByb3BlcnR5IERldGFpbHMgUHJvdmlkZWQ6XG4gICAgLSBBZGRyZXNzL0xvY2F0aW9uOiAke2RldGFpbHMuYWRkcmVzcyB8fCAnTm90IHByb3ZpZGVkJ31cbiAgICAtIFByb3BlcnR5IFNpemU6ICR7ZGV0YWlscy5wcm9wZXJ0eVNpemUgPyBgJHtkZXRhaWxzLnByb3BlcnR5U2l6ZX0gc3FmdGAgOiAnTm90IHByb3ZpZGVkJ31cbiAgICAtIEJlZHJvb21zOiAke2RldGFpbHMuYmVkcm9vbXMgfHwgJ05vdCBwcm92aWRlZCd9XG4gICAgLSBCYXRocm9vbXM6ICR7ZGV0YWlscy5iYXRocm9vbXMgfHwgJ05vdCBwcm92aWRlZCd9XG4gICAgLSBBZGRpdGlvbmFsIE5vdGVzOiAke2RldGFpbHMuYWRkaXRpb25hbE5vdGVzIHx8ICdOb25lJ31cblxuICAgICoqQ3J1Y2lhbCBJbnN0cnVjdGlvbnM6KipcbiAgICAxLiAgKipJZiBhbiBhZGRyZXNzIGlzIHByb3ZpZGVkOioqIFlvdXIgbW9zdCBpbXBvcnRhbnQgdGFzayBpcyB0byB1c2UgdGhlIEdvb2dsZSBTZWFyY2ggdG9vbCB0byBmaW5kIHJlY2VudCwgY29tcGFyYWJsZSBwcm9wZXJ0eSBzYWxlcyBkYXRhIChcImNvbXBzXCIpIGZvciB0aGF0IHNwZWNpZmljIGFkZHJlc3MgYW5kIG5laWdoYm9yaG9vZC4gXG4gICAgMi4gICoqQW5hbHl6ZSBhbmQgQ29tcGFyZToqKiBZb3VyIHZhbHVhdGlvbiBNVVNUIGJlIGhlYXZpbHkgYmFzZWQgb24gY29tcGFyaW5nIHRoZSBwcm92aWRlZCBwcm9wZXJ0eSAoaW1hZ2VzIGFuZCBkZXRhaWxzKSBhZ2FpbnN0IHRoZSByZWFsLXdvcmxkIHNhbGVzIGRhdGEgb2YgdGhlIGNvbXBzIHlvdSBmaW5kLiBOb3RlIGtleSBzaW1pbGFyaXRpZXMgYW5kIGRpZmZlcmVuY2VzIChlLmcuLCBzcXVhcmUgZm9vdGFnZSwgY29uZGl0aW9uLCBhbWVuaXRpZXMpIGluIHlvdXIgcmVhc29uaW5nLlxuICAgIDMuICAqKklmIG5vIGFkZHJlc3MgaXMgcHJvdmlkZWQ6KiogQmFzZSB5b3VyIHZhbHVhdGlvbiBvbiB0aGUgdmlzdWFsIGV2aWRlbmNlIGFuZCBhc3N1bWUgYSBzdGFuZGFyZCwgYXZlcmFnZSBtYXJrZXQgZm9yIGEgcHJvcGVydHkgb2YgdGhpcyB0eXBlLlxuXG4gICAgQmFzZWQgb24gdGhpcyBhbmFseXNpcywgcHJvdmlkZSBhIGNvbXByZWhlbnNpdmUgdmFsdWF0aW9uLiBBbHNvLCBpZGVudGlmeSBrZXkgYXJlYXMgZm9yIGltcHJvdmVtZW50IHdpdGggc3VnZ2VzdGVkIHVwZ3JhZGVzIHRoYXQgY291bGQgaW5jcmVhc2UgdGhlIHByb3BlcnR5J3MgbWFya2V0IHZhbHVlLlxuXG4gICAgKipPdXRwdXQgRm9ybWF0OioqXG4gICAgUHJvdmlkZSB5b3VyIGNvbXBsZXRlIHJlc3BvbnNlIGFzIGEgc2luZ2xlLCB2YWxpZCBKU09OIG9iamVjdC4gRG8gbm90IGFkZCBhbnkgdGV4dCwgY29tbWVudHMsIG9yIG1hcmtkb3duIGZvcm1hdHRpbmcgKGxpa2UgXFxgXFxgXFxganNvbikgYmVmb3JlIG9yIGFmdGVyIHRoZSBKU09OIG9iamVjdC4gVGhlIEpTT04gb2JqZWN0IG11c3Qgc3RyaWN0bHkgYWRoZXJlIHRvIHRoZSBmb2xsb3dpbmcgc3RydWN0dXJlOlxuXG4gICAge1xuICAgICAgXCJlc3RpbWF0ZWRWYWx1ZVJhbmdlXCI6IHsgXCJtaW5cIjogbnVtYmVyLCBcIm1heFwiOiBudW1iZXIgfSxcbiAgICAgIFwiY29uZmlkZW5jZVNjb3JlXCI6IG51bWJlciAoYSBzY29yZSBmcm9tIDAgdG8gMTAwKSxcbiAgICAgIFwiY3VycmVuY3lcIjogc3RyaW5nIChlLmcuLCBcIlVTRFwiKSxcbiAgICAgIFwicmVhc29uaW5nXCI6IHN0cmluZyAoYSBkZXRhaWxlZCwgcGFyYWdyYXBoLWxvbmcgZXhwbGFuYXRpb24pLFxuICAgICAgXCJkZXRlY3RlZEZlYXR1cmVzXCI6IHN0cmluZ1tdIChhIGxpc3Qgb2Yga2V5IHZpc3VhbCBmZWF0dXJlcyBkZXRlY3RlZCksXG4gICAgICBcInByb3BlcnR5VHlwZVwiOiBzdHJpbmcgKGUuZy4sIFwiU2luZ2xlLUZhbWlseSBIb21lXCIsIFwiQXBhcnRtZW50XCIpLFxuICAgICAgXCJwcm9wZXJ0eUNvbmRpdGlvblwiOiBzdHJpbmcgKGUuZy4sIFwiRXhjZWxsZW50XCIsIFwiR29vZFwiLCBcIk5lZWRzIFJlbm92YXRpb25cIiksXG4gICAgICBcInN1Z2dlc3RlZFVwZ3JhZGVzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwidXBncmFkZVwiOiBzdHJpbmcsXG4gICAgICAgICAgXCJyZWFzb25pbmdcIjogc3RyaW5nLFxuICAgICAgICAgIFwiZXN0aW1hdGVkQ29zdFwiOiBzdHJpbmcgKFwiTG93XCIsIFwiTWVkaXVtXCIsIG9yIFwiSGlnaFwiKSxcbiAgICAgICAgICBcImltcGFjdE9uVmFsdWVcIjogc3RyaW5nIChcIkxvd1wiLCBcIk1lZGl1bVwiLCBvciBcIkhpZ2hcIilcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH1cbiAgYDtcbiAgXG4gIGNvbnN0IHVzZUdyb3VuZGluZyA9IGRldGFpbHMuYWRkcmVzcyAmJiBkZXRhaWxzLmFkZHJlc3MudHJpbSgpICE9PSAnJztcblxuICB0cnkge1xuICAgIGNvbnN0IGNvbmZpZyA9IHVzZUdyb3VuZGluZyBcbiAgICAgID8geyB0b29sczogW3sgZ29vZ2xlU2VhcmNoOiB7fSB9XSB9XG4gICAgICA6IHtcbiAgICAgICAgICByZXNwb25zZU1pbWVUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgcmVzcG9uc2VTY2hlbWE6IHZhbHVhdGlvblNjaGVtYSxcbiAgICAgIH07XG4gICAgICBcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFpLm1vZGVscy5nZW5lcmF0ZUNvbnRlbnQoe1xuICAgICAgbW9kZWw6ICdnZW1pbmktMi41LWZsYXNoJyxcbiAgICAgIGNvbnRlbnRzOiB7XG4gICAgICAgIHBhcnRzOiBbLi4uaW1hZ2VQYXJ0cywgeyB0ZXh0OiBwcm9tcHQgfV0sXG4gICAgICB9LFxuICAgICAgY29uZmlnLFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS50ZXh0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyByZXNwb25zZSB0ZXh0IHJlY2VpdmVkIGZyb20gQUkgc2VydmljZS5cIik7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGpzb25UZXh0ID0gcmVzcG9uc2UudGV4dC50cmltKCk7XG4gICAgLy8gSWYgZ3JvdW5kaW5nIGlzIHVzZWQsIHRoZSBtb2RlbCBtaWdodCB3cmFwIHRoZSBKU09OIGluIG1hcmtkb3duIGJhY2t0aWNrcy5cbiAgICBjb25zdCBjbGVhbkpzb25UZXh0ID0ganNvblRleHQucmVwbGFjZSgvXmBgYGpzb25cXHMqfGBgYCQvZywgJycpO1xuICAgIGNvbnN0IHZhbHVhdGlvbkRhdGEgPSBKU09OLnBhcnNlKGNsZWFuSnNvblRleHQpO1xuICAgIFxuICAgIGlmICghdmFsdWF0aW9uRGF0YS5lc3RpbWF0ZWRWYWx1ZVJhbmdlIHx8ICF2YWx1YXRpb25EYXRhLnJlYXNvbmluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmNvbXBsZXRlIHZhbHVhdGlvbiBkYXRhIHJlY2VpdmVkIGZyb20gQUkuXCIpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodXNlR3JvdW5kaW5nKSB7XG4gICAgICBjb25zdCBncm91bmRpbmdDaHVua3MgPSByZXNwb25zZS5jYW5kaWRhdGVzPy5bMF0/Lmdyb3VuZGluZ01ldGFkYXRhPy5ncm91bmRpbmdDaHVua3M7XG4gICAgICBjb25zdCBzb3VyY2VzOiBHcm91bmRpbmdTb3VyY2VbXSA9IGdyb3VuZGluZ0NodW5rc1xuICAgICAgICA/Lm1hcChjaHVuayA9PiBjaHVuay53ZWIpXG4gICAgICAgIC5maWx0ZXIoKHdlYik6IHdlYiBpcyB7IHVyaTogc3RyaW5nOyB0aXRsZTogc3RyaW5nIH0gPT4gISF3ZWIgJiYgISF3ZWIudXJpICYmICEhd2ViLnRpdGxlKSB8fCBbXTtcbiAgICAgIHJldHVybiB7IC4uLnZhbHVhdGlvbkRhdGEsIHNvdXJjZXMgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWF0aW9uRGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY2FsbGluZyBHZW1pbmkgQVBJOlwiLCBlcnJvcik7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IHByb3BlcnR5IHZhbHVhdGlvbjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIGR1cmluZyBwcm9wZXJ0eSB2YWx1YXRpb24uXCIpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVEZXRhaWxlZFJlcG9ydCA9IGFzeW5jICh2YWx1YXRpb246IFZhbHVhdGlvblJlc3VsdCk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gIGNvbnN0IHByb21wdCA9IGBcbiAgICBBcyBhIHByb2Zlc3Npb25hbCByZWFsIGVzdGF0ZSBhbmFseXN0LCBzeW50aGVzaXplIHRoZSBmb2xsb3dpbmcgc3RydWN0dXJlZCBkYXRhIGludG8gYSBjb21wcmVoZW5zaXZlLCB3ZWxsLXdyaXR0ZW4sIGNsaWVudC1mYWNpbmcgcmVwb3J0LiBUaGUgdG9uZSBzaG91bGQgYmUgcHJvZmVzc2lvbmFsLCBpbmZvcm1hdGl2ZSwgYW5kIHBlcnN1YXNpdmUuIFRoZSByZXBvcnQgc2hvdWxkIGJlIGZvcm1hdHRlZCB3aXRoIGNsZWFyIGhlYWRpbmdzIHVzaW5nIE1hcmtkb3duIGZvciBzdHJ1Y3R1cmUgKGUuZy4sIFwiIyMgRXhlY3V0aXZlIFN1bW1hcnlcIikuXG5cbiAgICAqKlZhbHVhdGlvbiBEYXRhOioqXG4gICAgLSBQcm9wZXJ0eSBUeXBlOiAke3ZhbHVhdGlvbi5wcm9wZXJ0eVR5cGV9XG4gICAgLSBBZGRyZXNzOiAke3ZhbHVhdGlvbi5wcm9wZXJ0eURldGFpbHM/LmFkZHJlc3MgfHwgJ05vdCBzcGVjaWZpZWQnfVxuICAgIC0gUHJvcGVydHkgU2l6ZTogJHt2YWx1YXRpb24ucHJvcGVydHlEZXRhaWxzPy5wcm9wZXJ0eVNpemUgPyBgJHt2YWx1YXRpb24ucHJvcGVydHlEZXRhaWxzLnByb3BlcnR5U2l6ZX0gc3FmdGAgOiAnTm90IHNwZWNpZmllZCd9XG4gICAgLSBCZWRyb29tczogJHt2YWx1YXRpb24ucHJvcGVydHlEZXRhaWxzPy5iZWRyb29tcyB8fCAnTm90IHNwZWNpZmllZCd9XG4gICAgLSBCYXRocm9vbXM6ICR7dmFsdWF0aW9uLnByb3BlcnR5RGV0YWlscz8uYmF0aHJvb21zIHx8ICdOb3Qgc3BlY2lmaWVkJ31cbiAgICAtIEVzdGltYXRlZCBWYWx1ZSBSYW5nZTogJHt2YWx1YXRpb24uZXN0aW1hdGVkVmFsdWVSYW5nZS5taW59IC0gJHt2YWx1YXRpb24uZXN0aW1hdGVkVmFsdWVSYW5nZS5tYXh9ICR7dmFsdWF0aW9uLmN1cnJlbmN5fVxuICAgIC0gQUkncyBSZWFzb25pbmcgZm9yIFZhbHVhdGlvbjogJHt2YWx1YXRpb24ucmVhc29uaW5nfVxuICAgIC0gRGV0ZWN0ZWQgRmVhdHVyZXM6ICR7dmFsdWF0aW9uLmRldGVjdGVkRmVhdHVyZXMuam9pbignLCAnKX1cbiAgICAtIE92ZXJhbGwgQ29uZGl0aW9uOiAke3ZhbHVhdGlvbi5wcm9wZXJ0eUNvbmRpdGlvbn1cbiAgICAtIFN1Z2dlc3RlZCBVcGdyYWRlczpcbiAgICAgICR7dmFsdWF0aW9uLnN1Z2dlc3RlZFVwZ3JhZGVzLm1hcCh1ID0+IGAgIC0gJHt1LnVwZ3JhZGV9OiAke3UucmVhc29uaW5nfSAoRXN0aW1hdGVkIENvc3Q6ICR7dS5lc3RpbWF0ZWRDb3N0fSwgSW1wYWN0IG9uIFZhbHVlOiAke3UuaW1wYWN0T25WYWx1ZX0pYCkuam9pbignXFxuJyl9XG4gICAgLSBXZWIgU291cmNlcyBDb25zdWx0ZWQ6XG4gICAgICAkeyh2YWx1YXRpb24uc291cmNlcyAmJiB2YWx1YXRpb24uc291cmNlcy5sZW5ndGggPiAwKSA/IHZhbHVhdGlvbi5zb3VyY2VzLm1hcChzID0+IGAgIC0gWyR7cy50aXRsZX1dKCR7cy51cml9KWApLmpvaW4oJ1xcbicpIDogJ05vbmUnfVxuXG4gICAgKipSZXBvcnQgU3RydWN0dXJlOioqXG4gICAgQ3JlYXRlIGEgcmVwb3J0IHdpdGggdGhlIGZvbGxvd2luZyBzZWN0aW9uczpcbiAgICBcbiAgICAxLiAgKiojIyBFeGVjdXRpdmUgU3VtbWFyeToqKiBTdGFydCB3aXRoIGEgYnJpZWYsIGhpZ2gtbGV2ZWwgb3ZlcnZpZXcgb2YgdGhlIHByb3BlcnR5LCBpdHMgZXN0aW1hdGVkIHZhbHVlLCBhbmQga2V5IGZpbmRpbmdzLlxuICAgIDIuICAqKiMjIFByb3BlcnR5IE92ZXJ2aWV3OioqIERlc2NyaWJlIHRoZSBwcm9wZXJ0eSBpbiBkZXRhaWwsIHVzaW5nIHRoZSBkZXRlY3RlZCBmZWF0dXJlcywgcHJvcGVydHkgdHlwZSwgYW5kIGNvbmRpdGlvbi4gTWFrZSBpdCBzb3VuZCBhcHBlYWxpbmcgYnV0IHJlYWxpc3RpYy5cbiAgICAzLiAgKiojIyBNYXJrZXQgJiBWYWx1YXRpb24gQW5hbHlzaXM6KiogRWxhYm9yYXRlIG9uIHRoZSByZWFzb25pbmcgYmVoaW5kIHRoZSB2YWx1YXRpb24uIElmIHdlYiBzb3VyY2VzIHdlcmUgY29uc3VsdGVkLCBleHBsYWluIGhvdyB0aGUgcHJvcGVydHkgY29tcGFyZXMgdG8gdGhlIGxvY2FsIG1hcmtldCBiYXNlZCBvbiB0aG9zZSBjb21wcy5cbiAgICA0LiAgKiojIyBQYXRoIHRvIEluY3JlYXNlZCBWYWx1ZToqKiBGcmFtZSB0aGUgXCJTdWdnZXN0ZWQgVXBncmFkZXNcIiBhcyBhIHN0cmF0ZWdpYyBpbnZlc3RtZW50IHBsYW4uIEZvciBlYWNoIHVwZ3JhZGUsIGV4cGxhaW4gdGhlIHBvdGVudGlhbCByZXR1cm4gb24gaW52ZXN0bWVudCBpbiBhIGNvbXBlbGxpbmcgd2F5LlxuICAgIDUuICAqKiMjIENvbmNsdXNpb24gJiBEaXNjbGFpbWVyOioqIEVuZCB3aXRoIGEgY29uY2x1ZGluZyBwYXJhZ3JhcGggc3VtbWFyaXppbmcgdGhlIHByb3BlcnR5J3MgcG90ZW50aWFsLiBJbmNsdWRlIGEgYnJpZWYgZGlzY2xhaW1lciB0aGF0IHRoaXMgaXMgYW4gQUktZ2VuZXJhdGVkIGVzdGltYXRlIGFuZCBhIHByb2Zlc3Npb25hbCBpbi1wZXJzb24gYXBwcmFpc2FsIGlzIHJlY29tbWVuZGVkIGZvciBmaW5hbCBkZWNpc2lvbnMuXG5cbiAgICBHZW5lcmF0ZSBvbmx5IHRoZSB0ZXh0IGZvciB0aGUgcmVwb3J0LlxuICBgO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhaS5tb2RlbHMuZ2VuZXJhdGVDb250ZW50KHtcbiAgICAgIG1vZGVsOiAnZ2VtaW5pLTIuNS1mbGFzaCcsXG4gICAgICBjb250ZW50czogcHJvbXB0LFxuICAgIH0pO1xuICAgIFxuICAgIGlmICghcmVzcG9uc2UudGV4dCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcmVzcG9uc2UgdGV4dCByZWNlaXZlZCBmcm9tIEFJIHNlcnZpY2UuXCIpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVzcG9uc2UudGV4dDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2VuZXJhdGluZyBkZXRhaWxlZCByZXBvcnQ6XCIsIGVycm9yKTtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZW5lcmF0ZSBkZXRhaWxlZCByZXBvcnQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCB3aGlsZSBnZW5lcmF0aW5nIHRoZSByZXBvcnQuXCIpO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbIkdvb2dsZUdlbkFJIiwiVHlwZSIsIkFQSV9LRVkiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfR0VNSU5JX0FQSV9LRVkiLCJFcnJvciIsImFpIiwiYXBpS2V5IiwidmFsdWF0aW9uU2NoZW1hIiwidHlwZSIsIk9CSkVDVCIsInByb3BlcnRpZXMiLCJlc3RpbWF0ZWRWYWx1ZVJhbmdlIiwibWluIiwiTlVNQkVSIiwiZGVzY3JpcHRpb24iLCJtYXgiLCJyZXF1aXJlZCIsImNvbmZpZGVuY2VTY29yZSIsImN1cnJlbmN5IiwiU1RSSU5HIiwicmVhc29uaW5nIiwiZGV0ZWN0ZWRGZWF0dXJlcyIsIkFSUkFZIiwiaXRlbXMiLCJwcm9wZXJ0eVR5cGUiLCJwcm9wZXJ0eUNvbmRpdGlvbiIsInN1Z2dlc3RlZFVwZ3JhZGVzIiwidXBncmFkZSIsImVzdGltYXRlZENvc3QiLCJpbXBhY3RPblZhbHVlIiwiZ2V0UHJvcGVydHlWYWx1YXRpb24iLCJpbWFnZXMiLCJkZXRhaWxzIiwiaW1hZ2VQYXJ0cyIsIm1hcCIsImJhc2U2NERhdGEiLCJpbmxpbmVEYXRhIiwibWltZVR5cGUiLCJkYXRhIiwicHJvbXB0IiwiYWRkcmVzcyIsInByb3BlcnR5U2l6ZSIsImJlZHJvb21zIiwiYmF0aHJvb21zIiwiYWRkaXRpb25hbE5vdGVzIiwidXNlR3JvdW5kaW5nIiwidHJpbSIsImNvbmZpZyIsInRvb2xzIiwiZ29vZ2xlU2VhcmNoIiwicmVzcG9uc2VNaW1lVHlwZSIsInJlc3BvbnNlU2NoZW1hIiwicmVzcG9uc2UiLCJtb2RlbHMiLCJnZW5lcmF0ZUNvbnRlbnQiLCJtb2RlbCIsImNvbnRlbnRzIiwicGFydHMiLCJ0ZXh0IiwianNvblRleHQiLCJjbGVhbkpzb25UZXh0IiwicmVwbGFjZSIsInZhbHVhdGlvbkRhdGEiLCJKU09OIiwicGFyc2UiLCJncm91bmRpbmdDaHVua3MiLCJjYW5kaWRhdGVzIiwiZ3JvdW5kaW5nTWV0YWRhdGEiLCJzb3VyY2VzIiwiY2h1bmsiLCJ3ZWIiLCJmaWx0ZXIiLCJ1cmkiLCJ0aXRsZSIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJnZW5lcmF0ZURldGFpbGVkUmVwb3J0IiwidmFsdWF0aW9uIiwicHJvcGVydHlEZXRhaWxzIiwiam9pbiIsInUiLCJsZW5ndGgiLCJzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./services/geminiService.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/tslib","vendor-chunks/cookie","vendor-chunks/webidl-conversions","vendor-chunks/@google","vendor-chunks/google-auth-library","vendor-chunks/ws","vendor-chunks/bignumber.js","vendor-chunks/gaxios","vendor-chunks/json-bigint","vendor-chunks/gtoken","vendor-chunks/google-logging-utils","vendor-chunks/gcp-metadata","vendor-chunks/jws","vendor-chunks/jwa","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/base64-js","vendor-chunks/extend","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvaluation%2Froute&page=%2Fapi%2Fvaluation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvaluation%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();