/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/valuation/route";
exports.ids = ["app/api/valuation/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ "node:https":
/*!*****************************!*\
  !*** external "node:https" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:https");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:net");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvaluation%2Froute&page=%2Fapi%2Fvaluation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvaluation%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvaluation%2Froute&page=%2Fapi%2Fvaluation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvaluation%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_macbook_Desktop_Projects_visionvalu_ai_property_valuation_app_api_valuation_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/valuation/route.ts */ \"(rsc)/./app/api/valuation/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/valuation/route\",\n        pathname: \"/api/valuation\",\n        filename: \"route\",\n        bundlePath: \"app/api/valuation/route\"\n    },\n    resolvedPagePath: \"/Users/macbook/Desktop/Projects/visionvalu_-ai-property-valuation/app/api/valuation/route.ts\",\n    nextConfigOutput,\n    userland: _Users_macbook_Desktop_Projects_visionvalu_ai_property_valuation_app_api_valuation_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/valuation/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ2YWx1YXRpb24lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnZhbHVhdGlvbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnZhbHVhdGlvbiUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1hY2Jvb2slMkZEZXNrdG9wJTJGUHJvamVjdHMlMkZ2aXNpb252YWx1Xy1haS1wcm9wZXJ0eS12YWx1YXRpb24lMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbWFjYm9vayUyRkRlc2t0b3AlMkZQcm9qZWN0cyUyRnZpc2lvbnZhbHVfLWFpLXByb3BlcnR5LXZhbHVhdGlvbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDNEM7QUFDekg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXNpb252YWx1LWFpLXByb3BlcnR5LXZhbHVhdGlvbi8/MDI5NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvbWFjYm9vay9EZXNrdG9wL1Byb2plY3RzL3Zpc2lvbnZhbHVfLWFpLXByb3BlcnR5LXZhbHVhdGlvbi9hcHAvYXBpL3ZhbHVhdGlvbi9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdmFsdWF0aW9uL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdmFsdWF0aW9uXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS92YWx1YXRpb24vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvbWFjYm9vay9EZXNrdG9wL1Byb2plY3RzL3Zpc2lvbnZhbHVfLWFpLXByb3BlcnR5LXZhbHVhdGlvbi9hcHAvYXBpL3ZhbHVhdGlvbi9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdmFsdWF0aW9uL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvaluation%2Froute&page=%2Fapi%2Fvaluation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvaluation%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/valuation/route.ts":
/*!************************************!*\
  !*** ./app/api/valuation/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase/server */ \"(rsc)/./lib/supabase/server.ts\");\n/* harmony import */ var _services_geminiService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/services/geminiService */ \"(rsc)/./services/geminiService.ts\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist-node/v4.js\");\n\n\n\n\nasync function POST(request) {\n    const supabase = await (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.createClient)();\n    const { data: { user }, error: authError } = await supabase.auth.getUser();\n    if (authError || !user) {\n        return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n            error: \"Unauthorized\"\n        }, {\n            status: 401\n        });\n    }\n    const body = await request.json();\n    const { images, propertyDetails } = body;\n    // Check if user has enough credits (5 credits per valuation)\n    const { data: userData, error: userError } = await supabase.from(\"users\").select(\"credits\").eq(\"id\", user.id).single();\n    if (userError || !userData) {\n        return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n            error: \"User not found\"\n        }, {\n            status: 404\n        });\n    }\n    if (userData.credits < 5) {\n        return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n            error: \"Insufficient credits. You need 5 credits for a property valuation.\",\n            creditsNeeded: 5 - userData.credits\n        }, {\n            status: 400\n        });\n    }\n    try {\n        // Get valuation from Gemini\n        const valuationData = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_1__.getPropertyValuation)(images, propertyDetails);\n        const newReport = {\n            ...valuationData,\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(),\n            timestamp: new Date().toISOString(),\n            previewImage: `data:image/jpeg;base64,${images[0]}`,\n            propertyDetails: propertyDetails,\n            userId: user.id\n        };\n        // Save the report\n        const { data: savedReport, error: reportError } = await supabase.from(\"reports\").insert({\n            user_id: user.id,\n            report_data: newReport,\n            created_at: new Date().toISOString()\n        }).select().single();\n        if (reportError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n                error: reportError.message\n            }, {\n                status: 500\n            });\n        }\n        // Deduct 5 credits using the database function\n        const { error: spendCreditsError } = await supabase.rpc(\"spend_credits\", {\n            user_id: user.id,\n            amount: 5,\n            description: \"Property valuation report\"\n        });\n        if (spendCreditsError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n                error: spendCreditsError.message\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n            report: newReport\n        });\n    } catch (error) {\n        console.error(\"Error getting valuation:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n            error: \"Failed to get property valuation\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3ZhbHVhdGlvbi9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFvRDtBQUNXO0FBQ3JCO0FBQ1A7QUFHNUIsZUFBZUssS0FBS0MsT0FBZ0I7SUFDekMsTUFBTUMsV0FBVyxNQUFNUCxrRUFBWUE7SUFFbkMsTUFBTSxFQUFFUSxNQUFNLEVBQUVDLElBQUksRUFBRSxFQUFFQyxPQUFPQyxTQUFTLEVBQUUsR0FBRyxNQUFNSixTQUFTSyxJQUFJLENBQUNDLE9BQU87SUFFeEUsSUFBSUYsYUFBYSxDQUFDRixNQUFNO1FBQ3RCLE9BQU9QLHFEQUFZQSxDQUFDWSxJQUFJLENBQUM7WUFBRUosT0FBTztRQUFlLEdBQUc7WUFBRUssUUFBUTtRQUFJO0lBQ3BFO0lBRUEsTUFBTUMsT0FBTyxNQUFNVixRQUFRUSxJQUFJO0lBQy9CLE1BQU0sRUFBRUcsTUFBTSxFQUFFQyxlQUFlLEVBQUUsR0FBR0Y7SUFLcEMsNkRBQTZEO0lBQzdELE1BQU0sRUFBRVIsTUFBTVcsUUFBUSxFQUFFVCxPQUFPVSxTQUFTLEVBQUUsR0FBRyxNQUFNYixTQUNoRGMsSUFBSSxDQUFDLFNBQ0xDLE1BQU0sQ0FBQyxXQUNQQyxFQUFFLENBQUMsTUFBTWQsS0FBS2UsRUFBRSxFQUNoQkMsTUFBTTtJQUVULElBQUlMLGFBQWEsQ0FBQ0QsVUFBVTtRQUMxQixPQUFPakIscURBQVlBLENBQUNZLElBQUksQ0FBQztZQUFFSixPQUFPO1FBQWlCLEdBQUc7WUFBRUssUUFBUTtRQUFJO0lBQ3RFO0lBRUEsSUFBSUksU0FBU08sT0FBTyxHQUFHLEdBQUc7UUFDeEIsT0FBT3hCLHFEQUFZQSxDQUFDWSxJQUFJLENBQUM7WUFDdkJKLE9BQU87WUFDUGlCLGVBQWUsSUFBSVIsU0FBU08sT0FBTztRQUNyQyxHQUFHO1lBQUVYLFFBQVE7UUFBSTtJQUNuQjtJQUVBLElBQUk7UUFDRiw0QkFBNEI7UUFDNUIsTUFBTWEsZ0JBQWdCLE1BQU0zQiw2RUFBb0JBLENBQUNnQixRQUFRQztRQUV6RCxNQUFNVyxZQUE2QjtZQUNqQyxHQUFHRCxhQUFhO1lBQ2hCSixJQUFJcEIsZ0RBQU1BO1lBQ1YwQixXQUFXLElBQUlDLE9BQU9DLFdBQVc7WUFDakNDLGNBQWMsQ0FBQyx1QkFBdUIsRUFBRWhCLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNuREMsaUJBQWlCQTtZQUNqQmdCLFFBQVF6QixLQUFLZSxFQUFFO1FBQ2pCO1FBRUEsa0JBQWtCO1FBQ2xCLE1BQU0sRUFBRWhCLE1BQU0yQixXQUFXLEVBQUV6QixPQUFPMEIsV0FBVyxFQUFFLEdBQUcsTUFBTTdCLFNBQ3JEYyxJQUFJLENBQUMsV0FDTGdCLE1BQU0sQ0FBQztZQUNOQyxTQUFTN0IsS0FBS2UsRUFBRTtZQUNoQmUsYUFBYVY7WUFDYlcsWUFBWSxJQUFJVCxPQUFPQyxXQUFXO1FBQ3BDLEdBQ0NWLE1BQU0sR0FDTkcsTUFBTTtRQUVULElBQUlXLGFBQWE7WUFDZixPQUFPbEMscURBQVlBLENBQUNZLElBQUksQ0FBQztnQkFBRUosT0FBTzBCLFlBQVlLLE9BQU87WUFBQyxHQUFHO2dCQUFFMUIsUUFBUTtZQUFJO1FBQ3pFO1FBRUEsK0NBQStDO1FBQy9DLE1BQU0sRUFBRUwsT0FBT2dDLGlCQUFpQixFQUFFLEdBQUcsTUFBTW5DLFNBQVNvQyxHQUFHLENBQUMsaUJBQWlCO1lBQ3ZFTCxTQUFTN0IsS0FBS2UsRUFBRTtZQUNoQm9CLFFBQVE7WUFDUkMsYUFBYTtRQUNmO1FBRUEsSUFBSUgsbUJBQW1CO1lBQ3JCLE9BQU94QyxxREFBWUEsQ0FBQ1ksSUFBSSxDQUFDO2dCQUFFSixPQUFPZ0Msa0JBQWtCRCxPQUFPO1lBQUMsR0FBRztnQkFBRTFCLFFBQVE7WUFBSTtRQUMvRTtRQUVBLE9BQU9iLHFEQUFZQSxDQUFDWSxJQUFJLENBQUM7WUFBRWdDLFFBQVFqQjtRQUFVO0lBQy9DLEVBQUUsT0FBT25CLE9BQU87UUFDZHFDLFFBQVFyQyxLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxPQUFPUixxREFBWUEsQ0FBQ1ksSUFBSSxDQUN0QjtZQUFFSixPQUFPO1FBQW1DLEdBQzVDO1lBQUVLLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmlzaW9udmFsdS1haS1wcm9wZXJ0eS12YWx1YXRpb24vLi9hcHAvYXBpL3ZhbHVhdGlvbi9yb3V0ZS50cz82OTEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0AvbGliL3N1cGFiYXNlL3NlcnZlcidcbmltcG9ydCB7IGdldFByb3BlcnR5VmFsdWF0aW9uIH0gZnJvbSAnQC9zZXJ2aWNlcy9nZW1pbmlTZXJ2aWNlJ1xuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJ1xuaW1wb3J0IHR5cGUgeyBQcm9wZXJ0eURldGFpbHMsIFZhbHVhdGlvblJlc3VsdCB9IGZyb20gJ0AvdHlwZXMnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKVxuICBcbiAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3I6IGF1dGhFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKClcbiAgXG4gIGlmIChhdXRoRXJyb3IgfHwgIXVzZXIpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICB9XG5cbiAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gIGNvbnN0IHsgaW1hZ2VzLCBwcm9wZXJ0eURldGFpbHMgfSA9IGJvZHkgYXMgeyBcbiAgICBpbWFnZXM6IHN0cmluZ1tdXG4gICAgcHJvcGVydHlEZXRhaWxzOiBQcm9wZXJ0eURldGFpbHMgXG4gIH1cblxuICAvLyBDaGVjayBpZiB1c2VyIGhhcyBlbm91Z2ggY3JlZGl0cyAoNSBjcmVkaXRzIHBlciB2YWx1YXRpb24pXG4gIGNvbnN0IHsgZGF0YTogdXNlckRhdGEsIGVycm9yOiB1c2VyRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3VzZXJzJylcbiAgICAuc2VsZWN0KCdjcmVkaXRzJylcbiAgICAuZXEoJ2lkJywgdXNlci5pZClcbiAgICAuc2luZ2xlKClcblxuICBpZiAodXNlckVycm9yIHx8ICF1c2VyRGF0YSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0sIHsgc3RhdHVzOiA0MDQgfSlcbiAgfVxuXG4gIGlmICh1c2VyRGF0YS5jcmVkaXRzIDwgNSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgZXJyb3I6ICdJbnN1ZmZpY2llbnQgY3JlZGl0cy4gWW91IG5lZWQgNSBjcmVkaXRzIGZvciBhIHByb3BlcnR5IHZhbHVhdGlvbi4nLFxuICAgICAgY3JlZGl0c05lZWRlZDogNSAtIHVzZXJEYXRhLmNyZWRpdHNcbiAgICB9LCB7IHN0YXR1czogNDAwIH0pXG4gIH1cblxuICB0cnkge1xuICAgIC8vIEdldCB2YWx1YXRpb24gZnJvbSBHZW1pbmlcbiAgICBjb25zdCB2YWx1YXRpb25EYXRhID0gYXdhaXQgZ2V0UHJvcGVydHlWYWx1YXRpb24oaW1hZ2VzLCBwcm9wZXJ0eURldGFpbHMpXG5cbiAgICBjb25zdCBuZXdSZXBvcnQ6IFZhbHVhdGlvblJlc3VsdCA9IHtcbiAgICAgIC4uLnZhbHVhdGlvbkRhdGEsXG4gICAgICBpZDogdXVpZHY0KCksXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHByZXZpZXdJbWFnZTogYGRhdGE6aW1hZ2UvanBlZztiYXNlNjQsJHtpbWFnZXNbMF19YCxcbiAgICAgIHByb3BlcnR5RGV0YWlsczogcHJvcGVydHlEZXRhaWxzLFxuICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgIH1cblxuICAgIC8vIFNhdmUgdGhlIHJlcG9ydFxuICAgIGNvbnN0IHsgZGF0YTogc2F2ZWRSZXBvcnQsIGVycm9yOiByZXBvcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdyZXBvcnRzJylcbiAgICAgIC5pbnNlcnQoe1xuICAgICAgICB1c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgICByZXBvcnRfZGF0YTogbmV3UmVwb3J0LFxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9KVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKClcblxuICAgIGlmIChyZXBvcnRFcnJvcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IHJlcG9ydEVycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICAgIH1cblxuICAgIC8vIERlZHVjdCA1IGNyZWRpdHMgdXNpbmcgdGhlIGRhdGFiYXNlIGZ1bmN0aW9uXG4gICAgY29uc3QgeyBlcnJvcjogc3BlbmRDcmVkaXRzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYygnc3BlbmRfY3JlZGl0cycsIHtcbiAgICAgIHVzZXJfaWQ6IHVzZXIuaWQsXG4gICAgICBhbW91bnQ6IDUsXG4gICAgICBkZXNjcmlwdGlvbjogJ1Byb3BlcnR5IHZhbHVhdGlvbiByZXBvcnQnXG4gICAgfSlcblxuICAgIGlmIChzcGVuZENyZWRpdHNFcnJvcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IHNwZW5kQ3JlZGl0c0Vycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHJlcG9ydDogbmV3UmVwb3J0IH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB2YWx1YXRpb246JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBnZXQgcHJvcGVydHkgdmFsdWF0aW9uJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiZ2V0UHJvcGVydHlWYWx1YXRpb24iLCJOZXh0UmVzcG9uc2UiLCJ2NCIsInV1aWR2NCIsIlBPU1QiLCJyZXF1ZXN0Iiwic3VwYWJhc2UiLCJkYXRhIiwidXNlciIsImVycm9yIiwiYXV0aEVycm9yIiwiYXV0aCIsImdldFVzZXIiLCJqc29uIiwic3RhdHVzIiwiYm9keSIsImltYWdlcyIsInByb3BlcnR5RGV0YWlscyIsInVzZXJEYXRhIiwidXNlckVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwiaWQiLCJzaW5nbGUiLCJjcmVkaXRzIiwiY3JlZGl0c05lZWRlZCIsInZhbHVhdGlvbkRhdGEiLCJuZXdSZXBvcnQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwcmV2aWV3SW1hZ2UiLCJ1c2VySWQiLCJzYXZlZFJlcG9ydCIsInJlcG9ydEVycm9yIiwiaW5zZXJ0IiwidXNlcl9pZCIsInJlcG9ydF9kYXRhIiwiY3JlYXRlZF9hdCIsIm1lc3NhZ2UiLCJzcGVuZENyZWRpdHNFcnJvciIsInJwYyIsImFtb3VudCIsImRlc2NyaXB0aW9uIiwicmVwb3J0IiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/valuation/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase/server.ts":
/*!********************************!*\
  !*** ./lib/supabase/server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createClient: () => (/* binding */ createClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\nasync function createClient() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://bbbengshbvpqxtzrphov.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiYmVuZ3NoYnZwcXh0enJwaG92Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEzNzcxNjYsImV4cCI6MjA3Njk1MzE2Nn0.CkmmMBMjbQlJgsgMjRLGfjE6fO-BXiis8nZflT16VX8\", {\n        cookies: {\n            getAll () {\n                return cookieStore.getAll();\n            },\n            setAll (cookiesToSet) {\n                try {\n                    cookiesToSet.forEach(({ name, value, options })=>cookieStore.set(name, value, options));\n                } catch  {\n                // The `setAll` method was called from a Server Component.\n                // This can be ignored if you have middleware refreshing\n                // user sessions.\n                }\n            }\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Uvc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFrRDtBQUNaO0FBRS9CLGVBQWVFO0lBQ3BCLE1BQU1DLGNBQWMsTUFBTUYscURBQU9BO0lBRWpDLE9BQU9ELGlFQUFrQkEsQ0FDdkJJLDBDQUFvQyxFQUNwQ0Esa05BQXlDLEVBQ3pDO1FBQ0VILFNBQVM7WUFDUE87Z0JBQ0UsT0FBT0wsWUFBWUssTUFBTTtZQUMzQjtZQUNBQyxRQUFPQyxZQUFZO2dCQUNqQixJQUFJO29CQUNGQSxhQUFhQyxPQUFPLENBQUMsQ0FBQyxFQUFFQyxJQUFJLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxFQUFFLEdBQzVDWCxZQUFZWSxHQUFHLENBQUNILE1BQU1DLE9BQU9DO2dCQUVqQyxFQUFFLE9BQU07Z0JBQ04sMERBQTBEO2dCQUMxRCx3REFBd0Q7Z0JBQ3hELGlCQUFpQjtnQkFDbkI7WUFDRjtRQUNGO0lBQ0Y7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Zpc2lvbnZhbHUtYWktcHJvcGVydHktdmFsdWF0aW9uLy4vbGliL3N1cGFiYXNlL3NlcnZlci50cz82NjI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zc3InXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQ2xpZW50KCkge1xuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKVxuXG4gIHJldHVybiBjcmVhdGVTZXJ2ZXJDbGllbnQoXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSEsXG4gICAge1xuICAgICAgY29va2llczoge1xuICAgICAgICBnZXRBbGwoKSB7XG4gICAgICAgICAgcmV0dXJuIGNvb2tpZVN0b3JlLmdldEFsbCgpXG4gICAgICAgIH0sXG4gICAgICAgIHNldEFsbChjb29raWVzVG9TZXQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29va2llc1RvU2V0LmZvckVhY2goKHsgbmFtZSwgdmFsdWUsIG9wdGlvbnMgfSkgPT5cbiAgICAgICAgICAgICAgY29va2llU3RvcmUuc2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgLy8gVGhlIGBzZXRBbGxgIG1ldGhvZCB3YXMgY2FsbGVkIGZyb20gYSBTZXJ2ZXIgQ29tcG9uZW50LlxuICAgICAgICAgICAgLy8gVGhpcyBjYW4gYmUgaWdub3JlZCBpZiB5b3UgaGF2ZSBtaWRkbGV3YXJlIHJlZnJlc2hpbmdcbiAgICAgICAgICAgIC8vIHVzZXIgc2Vzc2lvbnMuXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9XG4gIClcbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJjb29raWVzIiwiY3JlYXRlQ2xpZW50IiwiY29va2llU3RvcmUiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJnZXRBbGwiLCJzZXRBbGwiLCJjb29raWVzVG9TZXQiLCJmb3JFYWNoIiwibmFtZSIsInZhbHVlIiwib3B0aW9ucyIsInNldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase/server.ts\n");

/***/ }),

/***/ "(rsc)/./services/geminiService.ts":
/*!***********************************!*\
  !*** ./services/geminiService.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateDetailedReport: () => (/* binding */ generateDetailedReport),\n/* harmony export */   getPropertyValuation: () => (/* binding */ getPropertyValuation)\n/* harmony export */ });\n/* harmony import */ var _google_genai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/genai */ \"(rsc)/./node_modules/@google/genai/dist/node/index.mjs\");\n\nconst API_KEY = \"AIzaSyDefnzV2zmVTS-mGUjliQI7grypJhfsdDk\";\nif (!API_KEY) {\n    throw new Error(\"GEMINI_API_KEY environment variable not set.\");\n}\nconst ai = new _google_genai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenAI({\n    apiKey: API_KEY\n});\nconst valuationSchema = {\n    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.OBJECT,\n    properties: {\n        estimatedValueRange: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.OBJECT,\n            properties: {\n                min: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.NUMBER,\n                    description: \"The minimum estimated value based on conservative market analysis.\"\n                },\n                max: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.NUMBER,\n                    description: \"The maximum estimated value based on optimistic market conditions.\"\n                }\n            },\n            required: [\n                \"min\",\n                \"max\"\n            ]\n        },\n        confidenceScore: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.NUMBER,\n            description: \"A score from 0 to 100 representing the confidence in the valuation based on image quality, property visibility, and market data availability.\"\n        },\n        currency: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n            description: \"The currency of the valuation (e.g., USD, EUR, NGN). Default to USD if not obvious.\"\n        },\n        reasoning: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n            description: \"A comprehensive, detailed explanation for the valuation including market analysis, property condition assessment, comparable properties, and key value drivers.\"\n        },\n        detectedFeatures: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.ARRAY,\n            items: {\n                type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n            },\n            description: \"A comprehensive list of key visual features detected including architectural style, interior finishes, outdoor amenities, and unique characteristics.\"\n        },\n        propertyType: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n            description: \"The specific type of property (e.g., 'Single-Family Home', 'Townhouse', 'Condo', 'Duplex', 'Multi-Family', 'Commercial Building').\"\n        },\n        propertyCondition: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n            description: \"The overall condition of the property (e.g., 'Excellent', 'Very Good', 'Good', 'Fair', 'Poor', 'Needs Major Renovation').\"\n        },\n        architecturalStyle: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n            description: \"The architectural style of the property (e.g., 'Modern', 'Traditional', 'Colonial', 'Craftsman', 'Contemporary', 'Victorian').\"\n        },\n        yearBuilt: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n            description: \"Estimated year built based on architectural features and construction materials visible in images.\"\n        },\n        squareFootage: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n            description: \"Estimated square footage based on visible rooms and proportions (e.g., '2,500-3,000 sqft', '1,200-1,500 sqft').\"\n        },\n        lotSize: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n            description: \"Estimated lot size based on visible outdoor space and property boundaries (e.g., '0.25-0.5 acres', 'Small urban lot').\"\n        },\n        keyValueDrivers: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.ARRAY,\n            items: {\n                type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n            },\n            description: \"Key factors that positively impact the property's value (e.g., 'Updated kitchen', 'Prime location', 'Large lot', 'Modern finishes').\"\n        },\n        potentialConcerns: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.ARRAY,\n            items: {\n                type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n            },\n            description: \"Potential issues or concerns that might negatively impact value (e.g., 'Outdated bathrooms', 'Small bedrooms', 'Limited parking').\"\n        },\n        marketPositioning: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n            description: \"How this property compares to the local market (e.g., 'Above market average', 'Market rate', 'Below market average', 'Premium property').\"\n        },\n        suggestedUpgrades: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.ARRAY,\n            description: \"A prioritized list of suggested upgrades or repairs to maximize the property's value, including detailed reasoning and ROI analysis.\",\n            items: {\n                type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.OBJECT,\n                properties: {\n                    upgrade: {\n                        type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                        description: \"The specific upgrade or repair suggested (e.g., 'Modernize Kitchen Appliances').\"\n                    },\n                    reasoning: {\n                        type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                        description: \"Detailed reasoning for why this upgrade is recommended based on current market trends and property analysis.\"\n                    },\n                    estimatedCost: {\n                        type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                        description: \"A detailed cost estimate ('$5,000-8,000', 'Low: $1,000-3,000', 'High: $15,000-25,000').\"\n                    },\n                    impactOnValue: {\n                        type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                        description: \"The potential impact on the property's value ('Low: +2-5%', 'Medium: +5-10%', 'High: +10-20%').\"\n                    },\n                    priority: {\n                        type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                        description: \"Priority level ('High', 'Medium', 'Low') based on cost-benefit analysis.\"\n                    },\n                    timeline: {\n                        type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                        description: \"Recommended timeline for implementation ('Immediate', 'Within 6 months', 'Long-term').\"\n                    }\n                },\n                required: [\n                    \"upgrade\",\n                    \"reasoning\",\n                    \"estimatedCost\",\n                    \"impactOnValue\",\n                    \"priority\",\n                    \"timeline\"\n                ]\n            }\n        }\n    },\n    required: [\n        \"estimatedValueRange\",\n        \"confidenceScore\",\n        \"currency\",\n        \"reasoning\",\n        \"detectedFeatures\",\n        \"propertyType\",\n        \"propertyCondition\",\n        \"architecturalStyle\",\n        \"yearBuilt\",\n        \"squareFootage\",\n        \"lotSize\",\n        \"keyValueDrivers\",\n        \"potentialConcerns\",\n        \"marketPositioning\",\n        \"suggestedUpgrades\"\n    ]\n};\nconst getPropertyValuation = async (images, details)=>{\n    const imageParts = images.map((base64Data)=>({\n            inlineData: {\n                mimeType: \"image/jpeg\",\n                data: base64Data\n            }\n        }));\n    const prompt = `\n    Analyze the following property images and details as an expert real estate appraiser with 20+ years of experience. Conduct a comprehensive property valuation using advanced market analysis techniques.\n\n    Property Details Provided:\n    - Address/Location: ${details.address || \"Not provided\"}\n    - Property Size: ${details.propertySize ? `${details.propertySize} sqft` : \"Not provided\"}\n    - Bedrooms: ${details.bedrooms || \"Not provided\"}\n    - Bathrooms: ${details.bathrooms || \"Not provided\"}\n    - Additional Notes: ${details.additionalNotes || \"None\"}\n\n    **Comprehensive Analysis Requirements:**\n\n    1. **Market Research & Comparables:**\n       - If address provided: Use Google Search to find recent sales (last 6-12 months) within 1-2 miles\n       - Analyze 3-5 comparable properties with similar size, age, and condition\n       - Consider market trends, seasonal variations, and local economic factors\n       - Factor in neighborhood desirability, school districts, and amenities\n\n    2. **Property Assessment:**\n       - Analyze architectural style, construction quality, and materials\n       - Assess interior condition, finishes, and modern amenities\n       - Evaluate outdoor spaces, landscaping, and curb appeal\n       - Identify unique features that add or detract from value\n       - Estimate year built, square footage, and lot size from visual cues\n\n    3. **Value Analysis:**\n       - Determine market positioning (above/below/at market rate)\n       - Identify key value drivers and potential concerns\n       - Consider location factors: walkability, safety, transportation\n       - Assess energy efficiency and modern systems\n       - Evaluate parking, storage, and functional layout\n\n    4. **Investment Analysis:**\n       - Provide detailed upgrade recommendations with ROI analysis\n       - Prioritize improvements by cost-benefit ratio\n       - Include timeline recommendations for implementation\n       - Consider market timing and buyer preferences\n\n    **Confidence Scoring Guidelines:**\n    - 90-100%: Excellent image quality, clear comps, detailed property info\n    - 80-89%: Good images, some comps, basic property details\n    - 70-79%: Fair images, limited comps, minimal details\n    - 60-69%: Poor images, no comps, very limited info\n    - Below 60%: Insufficient data for reliable valuation\n\n    **Output Format:**\n    Provide your complete response as a single, valid JSON object. Do not add any text, comments, or markdown formatting (like \\`\\`\\`json) before or after the JSON object. The JSON object must strictly adhere to the following structure:\n\n    {\n      \"estimatedValueRange\": { \"min\": number, \"max\": number },\n      \"confidenceScore\": number (0-100),\n      \"currency\": string (e.g., \"USD\"),\n      \"reasoning\": string (comprehensive market analysis and valuation rationale),\n      \"detectedFeatures\": string[] (detailed visual features and amenities),\n      \"propertyType\": string (specific property classification),\n      \"propertyCondition\": string (detailed condition assessment),\n      \"architecturalStyle\": string (architectural classification),\n      \"yearBuilt\": string (estimated construction year),\n      \"squareFootage\": string (estimated size range),\n      \"lotSize\": string (estimated lot dimensions),\n      \"keyValueDrivers\": string[] (positive value factors),\n      \"potentialConcerns\": string[] (negative value factors),\n      \"marketPositioning\": string (market comparison assessment),\n      \"suggestedUpgrades\": [\n        {\n          \"upgrade\": string,\n          \"reasoning\": string,\n          \"estimatedCost\": string (detailed cost range),\n          \"impactOnValue\": string (percentage impact),\n          \"priority\": string (\"High\", \"Medium\", \"Low\"),\n          \"timeline\": string (\"Immediate\", \"Within 6 months\", \"Long-term\")\n        }\n      ]\n    }\n  `;\n    const useGrounding = details.address && details.address.trim() !== \"\";\n    try {\n        const config = useGrounding ? {\n            tools: [\n                {\n                    googleSearch: {}\n                }\n            ]\n        } : {\n            responseMimeType: \"application/json\",\n            responseSchema: valuationSchema\n        };\n        const response = await ai.models.generateContent({\n            model: \"gemini-2.5-flash\",\n            contents: {\n                parts: [\n                    ...imageParts,\n                    {\n                        text: prompt\n                    }\n                ]\n            },\n            config\n        });\n        if (!response.text) {\n            throw new Error(\"No response text received from AI service.\");\n        }\n        const jsonText = response.text.trim();\n        // If grounding is used, the model might wrap the JSON in markdown backticks.\n        const cleanJsonText = jsonText.replace(/^```json\\s*|```$/g, \"\");\n        const valuationData = JSON.parse(cleanJsonText);\n        if (!valuationData.estimatedValueRange || !valuationData.reasoning) {\n            throw new Error(\"Incomplete valuation data received from AI.\");\n        }\n        if (useGrounding) {\n            const groundingChunks = response.candidates?.[0]?.groundingMetadata?.groundingChunks;\n            const sources = groundingChunks?.map((chunk)=>chunk.web).filter((web)=>!!web && !!web.uri && !!web.title) || [];\n            return {\n                ...valuationData,\n                sources\n            };\n        }\n        return valuationData;\n    } catch (error) {\n        console.error(\"Error calling Gemini API:\", error);\n        if (error instanceof Error) {\n            throw new Error(`Failed to get property valuation: ${error.message}`);\n        }\n        throw new Error(\"An unknown error occurred during property valuation.\");\n    }\n};\nconst generateDetailedReport = async (valuation)=>{\n    const prompt = `\n    As a senior real estate analyst with 20+ years of experience, create a comprehensive, professional property valuation report. This report will be used by potential buyers, sellers, and investors for critical decision-making. The tone should be authoritative, data-driven, and actionable.\n\n    **Comprehensive Property Data:**\n    - Property Type: ${valuation.propertyType}\n    - Address: ${valuation.propertyDetails?.address || \"Not specified\"}\n    - Property Size: ${valuation.propertyDetails?.propertySize ? `${valuation.propertyDetails.propertySize} sqft` : valuation.squareFootage || \"Not specified\"}\n    - Bedrooms: ${valuation.propertyDetails?.bedrooms || \"Not specified\"}\n    - Bathrooms: ${valuation.propertyDetails?.bathrooms || \"Not specified\"}\n    - Architectural Style: ${valuation.architecturalStyle || \"Not specified\"}\n    - Year Built: ${valuation.yearBuilt || \"Not specified\"}\n    - Lot Size: ${valuation.lotSize || \"Not specified\"}\n    - Estimated Value Range: $${valuation.estimatedValueRange.min.toLocaleString()} - $${valuation.estimatedValueRange.max.toLocaleString()} ${valuation.currency}\n    - Confidence Score: ${valuation.confidenceScore}%\n    - Market Positioning: ${valuation.marketPositioning || \"Not specified\"}\n    - Overall Condition: ${valuation.propertyCondition}\n    \n    **Key Value Drivers:**\n    ${valuation.keyValueDrivers ? valuation.keyValueDrivers.map((driver)=>`- ${driver}`).join(\"\\n\") : \"Not specified\"}\n    \n    **Potential Concerns:**\n    ${valuation.potentialConcerns ? valuation.potentialConcerns.map((concern)=>`- ${concern}`).join(\"\\n\") : \"None identified\"}\n    \n    **Detected Features:**\n    ${valuation.detectedFeatures.join(\", \")}\n    \n    **AI Valuation Analysis:**\n    ${valuation.reasoning}\n    \n    **Strategic Investment Recommendations:**\n    ${valuation.suggestedUpgrades.map((u)=>`- **${u.upgrade}** (Priority: ${u.priority}, Timeline: ${u.timeline})\n  - Reasoning: ${u.reasoning}\n  - Estimated Cost: ${u.estimatedCost}\n  - Value Impact: ${u.impactOnValue}`).join(\"\\n\\n\")}\n    \n    **Market Research Sources:**\n    ${valuation.sources && valuation.sources.length > 0 ? valuation.sources.map((s)=>`- [${s.title}](${s.uri})`).join(\"\\n\") : \"No external sources consulted\"}\n\n    **Professional Report Structure:**\n    Create a comprehensive report with the following sections:\n    \n    1. **## Executive Summary**\n       - Property overview and key metrics\n       - Estimated value range and confidence level\n       - Market positioning and investment potential\n       - Key recommendations summary\n    \n    2. **## Property Analysis**\n       - Detailed property description and characteristics\n       - Architectural assessment and construction quality\n       - Interior and exterior condition analysis\n       - Unique features and amenities\n       - Space utilization and functional layout\n    \n    3. **## Market Analysis & Valuation**\n       - Local market conditions and trends\n       - Comparable property analysis (if available)\n       - Valuation methodology and rationale\n       - Market positioning assessment\n       - Risk factors and market considerations\n    \n    4. **## Investment Strategy**\n       - Prioritized upgrade recommendations\n       - Cost-benefit analysis for each improvement\n       - Timeline and implementation strategy\n       - Expected return on investment\n       - Market timing considerations\n    \n    5. **## Risk Assessment**\n       - Potential concerns and mitigation strategies\n       - Market risks and economic factors\n       - Property-specific challenges\n       - Investment timeline recommendations\n    \n    6. **## Conclusion & Next Steps**\n       - Investment recommendation summary\n       - Key action items for buyers/sellers\n       - Professional disclaimer and limitations\n       - Recommendation for professional appraisal\n\n    **Report Requirements:**\n    - Use professional real estate terminology\n    - Include specific data points and metrics\n    - Provide actionable insights and recommendations\n    - Maintain objective, analytical tone\n    - Include relevant market context and trends\n    - Format with clear headings and bullet points\n    - Target length: 1,500-2,500 words\n\n    Generate only the report text without any additional commentary.\n  `;\n    try {\n        const response = await ai.models.generateContent({\n            model: \"gemini-2.5-flash\",\n            contents: prompt\n        });\n        if (!response.text) {\n            throw new Error(\"No response text received from AI service.\");\n        }\n        return response.text;\n    } catch (error) {\n        console.error(\"Error generating detailed report:\", error);\n        if (error instanceof Error) {\n            throw new Error(`Failed to generate detailed report: ${error.message}`);\n        }\n        throw new Error(\"An unknown error occurred while generating the report.\");\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxxQ0FBcUNBO1FBQ25ELElBQUlBLGlCQUFpQi9FLE9BQU87WUFDeEIsTUFBTSxJQUFJQSxNQUFNLENBQUMsb0NBQW9DLEVBQUUrRSxNQUFNRSxPQUFPLENBQUMsQ0FBQztRQUMxRTtRQUNBLE1BQU0sSUFBSWpGLE1BQU07SUFDbEI7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmlzaW9udmFsdS1haS1wcm9wZXJ0eS12YWx1YXRpb24vLi9zZXJ2aWNlcy9nZW1pbmlTZXJ2aWNlLnRzP2QyYTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR29vZ2xlR2VuQUksIFR5cGUgfSBmcm9tIFwiQGdvb2dsZS9nZW5haVwiO1xuaW1wb3J0IHR5cGUgeyBWYWx1YXRpb25SZXN1bHQsIFByb3BlcnR5RGV0YWlscywgR3JvdW5kaW5nU291cmNlIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5jb25zdCBBUElfS0VZID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR0VNSU5JX0FQSV9LRVk7XG5cbmlmICghQVBJX0tFWSkge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJHRU1JTklfQVBJX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZSBub3Qgc2V0LlwiKTtcbn1cblxuY29uc3QgYWkgPSBuZXcgR29vZ2xlR2VuQUkoeyBhcGlLZXk6IEFQSV9LRVkgfSk7XG5cbmNvbnN0IHZhbHVhdGlvblNjaGVtYSA9IHtcbiAgdHlwZTogVHlwZS5PQkpFQ1QsXG4gIHByb3BlcnRpZXM6IHtcbiAgICBlc3RpbWF0ZWRWYWx1ZVJhbmdlOiB7XG4gICAgICB0eXBlOiBUeXBlLk9CSkVDVCxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgbWluOiB7IHR5cGU6IFR5cGUuTlVNQkVSLCBkZXNjcmlwdGlvbjogXCJUaGUgbWluaW11bSBlc3RpbWF0ZWQgdmFsdWUgYmFzZWQgb24gY29uc2VydmF0aXZlIG1hcmtldCBhbmFseXNpcy5cIiB9LFxuICAgICAgICBtYXg6IHsgdHlwZTogVHlwZS5OVU1CRVIsIGRlc2NyaXB0aW9uOiBcIlRoZSBtYXhpbXVtIGVzdGltYXRlZCB2YWx1ZSBiYXNlZCBvbiBvcHRpbWlzdGljIG1hcmtldCBjb25kaXRpb25zLlwiIH0sXG4gICAgICB9LFxuICAgICAgcmVxdWlyZWQ6IFtcIm1pblwiLCBcIm1heFwiXSxcbiAgICB9LFxuICAgIGNvbmZpZGVuY2VTY29yZToge1xuICAgICAgdHlwZTogVHlwZS5OVU1CRVIsXG4gICAgICBkZXNjcmlwdGlvbjogXCJBIHNjb3JlIGZyb20gMCB0byAxMDAgcmVwcmVzZW50aW5nIHRoZSBjb25maWRlbmNlIGluIHRoZSB2YWx1YXRpb24gYmFzZWQgb24gaW1hZ2UgcXVhbGl0eSwgcHJvcGVydHkgdmlzaWJpbGl0eSwgYW5kIG1hcmtldCBkYXRhIGF2YWlsYWJpbGl0eS5cIixcbiAgICB9LFxuICAgIGN1cnJlbmN5OiB7XG4gICAgICB0eXBlOiBUeXBlLlNUUklORyxcbiAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBjdXJyZW5jeSBvZiB0aGUgdmFsdWF0aW9uIChlLmcuLCBVU0QsIEVVUiwgTkdOKS4gRGVmYXVsdCB0byBVU0QgaWYgbm90IG9idmlvdXMuXCIsXG4gICAgfSxcbiAgICByZWFzb25pbmc6IHtcbiAgICAgIHR5cGU6IFR5cGUuU1RSSU5HLFxuICAgICAgZGVzY3JpcHRpb246IFwiQSBjb21wcmVoZW5zaXZlLCBkZXRhaWxlZCBleHBsYW5hdGlvbiBmb3IgdGhlIHZhbHVhdGlvbiBpbmNsdWRpbmcgbWFya2V0IGFuYWx5c2lzLCBwcm9wZXJ0eSBjb25kaXRpb24gYXNzZXNzbWVudCwgY29tcGFyYWJsZSBwcm9wZXJ0aWVzLCBhbmQga2V5IHZhbHVlIGRyaXZlcnMuXCIsXG4gICAgfSxcbiAgICBkZXRlY3RlZEZlYXR1cmVzOiB7XG4gICAgICB0eXBlOiBUeXBlLkFSUkFZLFxuICAgICAgaXRlbXM6IHtcbiAgICAgICAgdHlwZTogVHlwZS5TVFJJTkcsXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246IFwiQSBjb21wcmVoZW5zaXZlIGxpc3Qgb2Yga2V5IHZpc3VhbCBmZWF0dXJlcyBkZXRlY3RlZCBpbmNsdWRpbmcgYXJjaGl0ZWN0dXJhbCBzdHlsZSwgaW50ZXJpb3IgZmluaXNoZXMsIG91dGRvb3IgYW1lbml0aWVzLCBhbmQgdW5pcXVlIGNoYXJhY3RlcmlzdGljcy5cIixcbiAgICB9LFxuICAgIHByb3BlcnR5VHlwZToge1xuICAgICAgdHlwZTogVHlwZS5TVFJJTkcsXG4gICAgICBkZXNjcmlwdGlvbjogXCJUaGUgc3BlY2lmaWMgdHlwZSBvZiBwcm9wZXJ0eSAoZS5nLiwgJ1NpbmdsZS1GYW1pbHkgSG9tZScsICdUb3duaG91c2UnLCAnQ29uZG8nLCAnRHVwbGV4JywgJ011bHRpLUZhbWlseScsICdDb21tZXJjaWFsIEJ1aWxkaW5nJykuXCIsXG4gICAgfSxcbiAgICBwcm9wZXJ0eUNvbmRpdGlvbjoge1xuICAgICAgICB0eXBlOiBUeXBlLlNUUklORyxcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIG92ZXJhbGwgY29uZGl0aW9uIG9mIHRoZSBwcm9wZXJ0eSAoZS5nLiwgJ0V4Y2VsbGVudCcsICdWZXJ5IEdvb2QnLCAnR29vZCcsICdGYWlyJywgJ1Bvb3InLCAnTmVlZHMgTWFqb3IgUmVub3ZhdGlvbicpLlwiLFxuICAgIH0sXG4gICAgYXJjaGl0ZWN0dXJhbFN0eWxlOiB7XG4gICAgICB0eXBlOiBUeXBlLlNUUklORyxcbiAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBhcmNoaXRlY3R1cmFsIHN0eWxlIG9mIHRoZSBwcm9wZXJ0eSAoZS5nLiwgJ01vZGVybicsICdUcmFkaXRpb25hbCcsICdDb2xvbmlhbCcsICdDcmFmdHNtYW4nLCAnQ29udGVtcG9yYXJ5JywgJ1ZpY3RvcmlhbicpLlwiLFxuICAgIH0sXG4gICAgeWVhckJ1aWx0OiB7XG4gICAgICB0eXBlOiBUeXBlLlNUUklORyxcbiAgICAgIGRlc2NyaXB0aW9uOiBcIkVzdGltYXRlZCB5ZWFyIGJ1aWx0IGJhc2VkIG9uIGFyY2hpdGVjdHVyYWwgZmVhdHVyZXMgYW5kIGNvbnN0cnVjdGlvbiBtYXRlcmlhbHMgdmlzaWJsZSBpbiBpbWFnZXMuXCIsXG4gICAgfSxcbiAgICBzcXVhcmVGb290YWdlOiB7XG4gICAgICB0eXBlOiBUeXBlLlNUUklORyxcbiAgICAgIGRlc2NyaXB0aW9uOiBcIkVzdGltYXRlZCBzcXVhcmUgZm9vdGFnZSBiYXNlZCBvbiB2aXNpYmxlIHJvb21zIGFuZCBwcm9wb3J0aW9ucyAoZS5nLiwgJzIsNTAwLTMsMDAwIHNxZnQnLCAnMSwyMDAtMSw1MDAgc3FmdCcpLlwiLFxuICAgIH0sXG4gICAgbG90U2l6ZToge1xuICAgICAgdHlwZTogVHlwZS5TVFJJTkcsXG4gICAgICBkZXNjcmlwdGlvbjogXCJFc3RpbWF0ZWQgbG90IHNpemUgYmFzZWQgb24gdmlzaWJsZSBvdXRkb29yIHNwYWNlIGFuZCBwcm9wZXJ0eSBib3VuZGFyaWVzIChlLmcuLCAnMC4yNS0wLjUgYWNyZXMnLCAnU21hbGwgdXJiYW4gbG90JykuXCIsXG4gICAgfSxcbiAgICBrZXlWYWx1ZURyaXZlcnM6IHtcbiAgICAgIHR5cGU6IFR5cGUuQVJSQVksXG4gICAgICBpdGVtczoge1xuICAgICAgICB0eXBlOiBUeXBlLlNUUklORyxcbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogXCJLZXkgZmFjdG9ycyB0aGF0IHBvc2l0aXZlbHkgaW1wYWN0IHRoZSBwcm9wZXJ0eSdzIHZhbHVlIChlLmcuLCAnVXBkYXRlZCBraXRjaGVuJywgJ1ByaW1lIGxvY2F0aW9uJywgJ0xhcmdlIGxvdCcsICdNb2Rlcm4gZmluaXNoZXMnKS5cIixcbiAgICB9LFxuICAgIHBvdGVudGlhbENvbmNlcm5zOiB7XG4gICAgICB0eXBlOiBUeXBlLkFSUkFZLFxuICAgICAgaXRlbXM6IHtcbiAgICAgICAgdHlwZTogVHlwZS5TVFJJTkcsXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246IFwiUG90ZW50aWFsIGlzc3VlcyBvciBjb25jZXJucyB0aGF0IG1pZ2h0IG5lZ2F0aXZlbHkgaW1wYWN0IHZhbHVlIChlLmcuLCAnT3V0ZGF0ZWQgYmF0aHJvb21zJywgJ1NtYWxsIGJlZHJvb21zJywgJ0xpbWl0ZWQgcGFya2luZycpLlwiLFxuICAgIH0sXG4gICAgbWFya2V0UG9zaXRpb25pbmc6IHtcbiAgICAgIHR5cGU6IFR5cGUuU1RSSU5HLFxuICAgICAgZGVzY3JpcHRpb246IFwiSG93IHRoaXMgcHJvcGVydHkgY29tcGFyZXMgdG8gdGhlIGxvY2FsIG1hcmtldCAoZS5nLiwgJ0Fib3ZlIG1hcmtldCBhdmVyYWdlJywgJ01hcmtldCByYXRlJywgJ0JlbG93IG1hcmtldCBhdmVyYWdlJywgJ1ByZW1pdW0gcHJvcGVydHknKS5cIixcbiAgICB9LFxuICAgIHN1Z2dlc3RlZFVwZ3JhZGVzOiB7XG4gICAgICB0eXBlOiBUeXBlLkFSUkFZLFxuICAgICAgZGVzY3JpcHRpb246IFwiQSBwcmlvcml0aXplZCBsaXN0IG9mIHN1Z2dlc3RlZCB1cGdyYWRlcyBvciByZXBhaXJzIHRvIG1heGltaXplIHRoZSBwcm9wZXJ0eSdzIHZhbHVlLCBpbmNsdWRpbmcgZGV0YWlsZWQgcmVhc29uaW5nIGFuZCBST0kgYW5hbHlzaXMuXCIsXG4gICAgICBpdGVtczoge1xuICAgICAgICB0eXBlOiBUeXBlLk9CSkVDVCxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHVwZ3JhZGU6IHsgdHlwZTogVHlwZS5TVFJJTkcsIGRlc2NyaXB0aW9uOiBcIlRoZSBzcGVjaWZpYyB1cGdyYWRlIG9yIHJlcGFpciBzdWdnZXN0ZWQgKGUuZy4sICdNb2Rlcm5pemUgS2l0Y2hlbiBBcHBsaWFuY2VzJykuXCIgfSxcbiAgICAgICAgICByZWFzb25pbmc6IHsgdHlwZTogVHlwZS5TVFJJTkcsIGRlc2NyaXB0aW9uOiBcIkRldGFpbGVkIHJlYXNvbmluZyBmb3Igd2h5IHRoaXMgdXBncmFkZSBpcyByZWNvbW1lbmRlZCBiYXNlZCBvbiBjdXJyZW50IG1hcmtldCB0cmVuZHMgYW5kIHByb3BlcnR5IGFuYWx5c2lzLlwiIH0sXG4gICAgICAgICAgZXN0aW1hdGVkQ29zdDogeyB0eXBlOiBUeXBlLlNUUklORywgZGVzY3JpcHRpb246IFwiQSBkZXRhaWxlZCBjb3N0IGVzdGltYXRlICgnJDUsMDAwLTgsMDAwJywgJ0xvdzogJDEsMDAwLTMsMDAwJywgJ0hpZ2g6ICQxNSwwMDAtMjUsMDAwJykuXCIgfSxcbiAgICAgICAgICBpbXBhY3RPblZhbHVlOiB7IHR5cGU6IFR5cGUuU1RSSU5HLCBkZXNjcmlwdGlvbjogXCJUaGUgcG90ZW50aWFsIGltcGFjdCBvbiB0aGUgcHJvcGVydHkncyB2YWx1ZSAoJ0xvdzogKzItNSUnLCAnTWVkaXVtOiArNS0xMCUnLCAnSGlnaDogKzEwLTIwJScpLlwiIH0sXG4gICAgICAgICAgcHJpb3JpdHk6IHsgdHlwZTogVHlwZS5TVFJJTkcsIGRlc2NyaXB0aW9uOiBcIlByaW9yaXR5IGxldmVsICgnSGlnaCcsICdNZWRpdW0nLCAnTG93JykgYmFzZWQgb24gY29zdC1iZW5lZml0IGFuYWx5c2lzLlwiIH0sXG4gICAgICAgICAgdGltZWxpbmU6IHsgdHlwZTogVHlwZS5TVFJJTkcsIGRlc2NyaXB0aW9uOiBcIlJlY29tbWVuZGVkIHRpbWVsaW5lIGZvciBpbXBsZW1lbnRhdGlvbiAoJ0ltbWVkaWF0ZScsICdXaXRoaW4gNiBtb250aHMnLCAnTG9uZy10ZXJtJykuXCIgfVxuICAgICAgICB9LFxuICAgICAgICByZXF1aXJlZDogW1widXBncmFkZVwiLCBcInJlYXNvbmluZ1wiLCBcImVzdGltYXRlZENvc3RcIiwgXCJpbXBhY3RPblZhbHVlXCIsIFwicHJpb3JpdHlcIiwgXCJ0aW1lbGluZVwiXVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgcmVxdWlyZWQ6IFtcbiAgICBcImVzdGltYXRlZFZhbHVlUmFuZ2VcIixcbiAgICBcImNvbmZpZGVuY2VTY29yZVwiLFxuICAgIFwiY3VycmVuY3lcIixcbiAgICBcInJlYXNvbmluZ1wiLFxuICAgIFwiZGV0ZWN0ZWRGZWF0dXJlc1wiLFxuICAgIFwicHJvcGVydHlUeXBlXCIsXG4gICAgXCJwcm9wZXJ0eUNvbmRpdGlvblwiLFxuICAgIFwiYXJjaGl0ZWN0dXJhbFN0eWxlXCIsXG4gICAgXCJ5ZWFyQnVpbHRcIixcbiAgICBcInNxdWFyZUZvb3RhZ2VcIixcbiAgICBcImxvdFNpemVcIixcbiAgICBcImtleVZhbHVlRHJpdmVyc1wiLFxuICAgIFwicG90ZW50aWFsQ29uY2VybnNcIixcbiAgICBcIm1hcmtldFBvc2l0aW9uaW5nXCIsXG4gICAgXCJzdWdnZXN0ZWRVcGdyYWRlc1wiXG4gIF0sXG59O1xuXG5cbmV4cG9ydCBjb25zdCBnZXRQcm9wZXJ0eVZhbHVhdGlvbiA9IGFzeW5jIChpbWFnZXM6IHN0cmluZ1tdLCBkZXRhaWxzOiBQcm9wZXJ0eURldGFpbHMpOiBQcm9taXNlPE9taXQ8VmFsdWF0aW9uUmVzdWx0LCAnaWQnIHwgJ3RpbWVzdGFtcCcgfCAncHJldmlld0ltYWdlJyB8ICdwcm9wZXJ0eURldGFpbHMnPj4gPT4ge1xuICBjb25zdCBpbWFnZVBhcnRzID0gaW1hZ2VzLm1hcChiYXNlNjREYXRhID0+ICh7XG4gICAgaW5saW5lRGF0YToge1xuICAgICAgbWltZVR5cGU6ICdpbWFnZS9qcGVnJyxcbiAgICAgIGRhdGE6IGJhc2U2NERhdGEsXG4gICAgfSxcbiAgfSkpO1xuXG4gIGNvbnN0IHByb21wdCA9IGBcbiAgICBBbmFseXplIHRoZSBmb2xsb3dpbmcgcHJvcGVydHkgaW1hZ2VzIGFuZCBkZXRhaWxzIGFzIGFuIGV4cGVydCByZWFsIGVzdGF0ZSBhcHByYWlzZXIgd2l0aCAyMCsgeWVhcnMgb2YgZXhwZXJpZW5jZS4gQ29uZHVjdCBhIGNvbXByZWhlbnNpdmUgcHJvcGVydHkgdmFsdWF0aW9uIHVzaW5nIGFkdmFuY2VkIG1hcmtldCBhbmFseXNpcyB0ZWNobmlxdWVzLlxuXG4gICAgUHJvcGVydHkgRGV0YWlscyBQcm92aWRlZDpcbiAgICAtIEFkZHJlc3MvTG9jYXRpb246ICR7ZGV0YWlscy5hZGRyZXNzIHx8ICdOb3QgcHJvdmlkZWQnfVxuICAgIC0gUHJvcGVydHkgU2l6ZTogJHtkZXRhaWxzLnByb3BlcnR5U2l6ZSA/IGAke2RldGFpbHMucHJvcGVydHlTaXplfSBzcWZ0YCA6ICdOb3QgcHJvdmlkZWQnfVxuICAgIC0gQmVkcm9vbXM6ICR7ZGV0YWlscy5iZWRyb29tcyB8fCAnTm90IHByb3ZpZGVkJ31cbiAgICAtIEJhdGhyb29tczogJHtkZXRhaWxzLmJhdGhyb29tcyB8fCAnTm90IHByb3ZpZGVkJ31cbiAgICAtIEFkZGl0aW9uYWwgTm90ZXM6ICR7ZGV0YWlscy5hZGRpdGlvbmFsTm90ZXMgfHwgJ05vbmUnfVxuXG4gICAgKipDb21wcmVoZW5zaXZlIEFuYWx5c2lzIFJlcXVpcmVtZW50czoqKlxuXG4gICAgMS4gKipNYXJrZXQgUmVzZWFyY2ggJiBDb21wYXJhYmxlczoqKlxuICAgICAgIC0gSWYgYWRkcmVzcyBwcm92aWRlZDogVXNlIEdvb2dsZSBTZWFyY2ggdG8gZmluZCByZWNlbnQgc2FsZXMgKGxhc3QgNi0xMiBtb250aHMpIHdpdGhpbiAxLTIgbWlsZXNcbiAgICAgICAtIEFuYWx5emUgMy01IGNvbXBhcmFibGUgcHJvcGVydGllcyB3aXRoIHNpbWlsYXIgc2l6ZSwgYWdlLCBhbmQgY29uZGl0aW9uXG4gICAgICAgLSBDb25zaWRlciBtYXJrZXQgdHJlbmRzLCBzZWFzb25hbCB2YXJpYXRpb25zLCBhbmQgbG9jYWwgZWNvbm9taWMgZmFjdG9yc1xuICAgICAgIC0gRmFjdG9yIGluIG5laWdoYm9yaG9vZCBkZXNpcmFiaWxpdHksIHNjaG9vbCBkaXN0cmljdHMsIGFuZCBhbWVuaXRpZXNcblxuICAgIDIuICoqUHJvcGVydHkgQXNzZXNzbWVudDoqKlxuICAgICAgIC0gQW5hbHl6ZSBhcmNoaXRlY3R1cmFsIHN0eWxlLCBjb25zdHJ1Y3Rpb24gcXVhbGl0eSwgYW5kIG1hdGVyaWFsc1xuICAgICAgIC0gQXNzZXNzIGludGVyaW9yIGNvbmRpdGlvbiwgZmluaXNoZXMsIGFuZCBtb2Rlcm4gYW1lbml0aWVzXG4gICAgICAgLSBFdmFsdWF0ZSBvdXRkb29yIHNwYWNlcywgbGFuZHNjYXBpbmcsIGFuZCBjdXJiIGFwcGVhbFxuICAgICAgIC0gSWRlbnRpZnkgdW5pcXVlIGZlYXR1cmVzIHRoYXQgYWRkIG9yIGRldHJhY3QgZnJvbSB2YWx1ZVxuICAgICAgIC0gRXN0aW1hdGUgeWVhciBidWlsdCwgc3F1YXJlIGZvb3RhZ2UsIGFuZCBsb3Qgc2l6ZSBmcm9tIHZpc3VhbCBjdWVzXG5cbiAgICAzLiAqKlZhbHVlIEFuYWx5c2lzOioqXG4gICAgICAgLSBEZXRlcm1pbmUgbWFya2V0IHBvc2l0aW9uaW5nIChhYm92ZS9iZWxvdy9hdCBtYXJrZXQgcmF0ZSlcbiAgICAgICAtIElkZW50aWZ5IGtleSB2YWx1ZSBkcml2ZXJzIGFuZCBwb3RlbnRpYWwgY29uY2VybnNcbiAgICAgICAtIENvbnNpZGVyIGxvY2F0aW9uIGZhY3RvcnM6IHdhbGthYmlsaXR5LCBzYWZldHksIHRyYW5zcG9ydGF0aW9uXG4gICAgICAgLSBBc3Nlc3MgZW5lcmd5IGVmZmljaWVuY3kgYW5kIG1vZGVybiBzeXN0ZW1zXG4gICAgICAgLSBFdmFsdWF0ZSBwYXJraW5nLCBzdG9yYWdlLCBhbmQgZnVuY3Rpb25hbCBsYXlvdXRcblxuICAgIDQuICoqSW52ZXN0bWVudCBBbmFseXNpczoqKlxuICAgICAgIC0gUHJvdmlkZSBkZXRhaWxlZCB1cGdyYWRlIHJlY29tbWVuZGF0aW9ucyB3aXRoIFJPSSBhbmFseXNpc1xuICAgICAgIC0gUHJpb3JpdGl6ZSBpbXByb3ZlbWVudHMgYnkgY29zdC1iZW5lZml0IHJhdGlvXG4gICAgICAgLSBJbmNsdWRlIHRpbWVsaW5lIHJlY29tbWVuZGF0aW9ucyBmb3IgaW1wbGVtZW50YXRpb25cbiAgICAgICAtIENvbnNpZGVyIG1hcmtldCB0aW1pbmcgYW5kIGJ1eWVyIHByZWZlcmVuY2VzXG5cbiAgICAqKkNvbmZpZGVuY2UgU2NvcmluZyBHdWlkZWxpbmVzOioqXG4gICAgLSA5MC0xMDAlOiBFeGNlbGxlbnQgaW1hZ2UgcXVhbGl0eSwgY2xlYXIgY29tcHMsIGRldGFpbGVkIHByb3BlcnR5IGluZm9cbiAgICAtIDgwLTg5JTogR29vZCBpbWFnZXMsIHNvbWUgY29tcHMsIGJhc2ljIHByb3BlcnR5IGRldGFpbHNcbiAgICAtIDcwLTc5JTogRmFpciBpbWFnZXMsIGxpbWl0ZWQgY29tcHMsIG1pbmltYWwgZGV0YWlsc1xuICAgIC0gNjAtNjklOiBQb29yIGltYWdlcywgbm8gY29tcHMsIHZlcnkgbGltaXRlZCBpbmZvXG4gICAgLSBCZWxvdyA2MCU6IEluc3VmZmljaWVudCBkYXRhIGZvciByZWxpYWJsZSB2YWx1YXRpb25cblxuICAgICoqT3V0cHV0IEZvcm1hdDoqKlxuICAgIFByb3ZpZGUgeW91ciBjb21wbGV0ZSByZXNwb25zZSBhcyBhIHNpbmdsZSwgdmFsaWQgSlNPTiBvYmplY3QuIERvIG5vdCBhZGQgYW55IHRleHQsIGNvbW1lbnRzLCBvciBtYXJrZG93biBmb3JtYXR0aW5nIChsaWtlIFxcYFxcYFxcYGpzb24pIGJlZm9yZSBvciBhZnRlciB0aGUgSlNPTiBvYmplY3QuIFRoZSBKU09OIG9iamVjdCBtdXN0IHN0cmljdGx5IGFkaGVyZSB0byB0aGUgZm9sbG93aW5nIHN0cnVjdHVyZTpcblxuICAgIHtcbiAgICAgIFwiZXN0aW1hdGVkVmFsdWVSYW5nZVwiOiB7IFwibWluXCI6IG51bWJlciwgXCJtYXhcIjogbnVtYmVyIH0sXG4gICAgICBcImNvbmZpZGVuY2VTY29yZVwiOiBudW1iZXIgKDAtMTAwKSxcbiAgICAgIFwiY3VycmVuY3lcIjogc3RyaW5nIChlLmcuLCBcIlVTRFwiKSxcbiAgICAgIFwicmVhc29uaW5nXCI6IHN0cmluZyAoY29tcHJlaGVuc2l2ZSBtYXJrZXQgYW5hbHlzaXMgYW5kIHZhbHVhdGlvbiByYXRpb25hbGUpLFxuICAgICAgXCJkZXRlY3RlZEZlYXR1cmVzXCI6IHN0cmluZ1tdIChkZXRhaWxlZCB2aXN1YWwgZmVhdHVyZXMgYW5kIGFtZW5pdGllcyksXG4gICAgICBcInByb3BlcnR5VHlwZVwiOiBzdHJpbmcgKHNwZWNpZmljIHByb3BlcnR5IGNsYXNzaWZpY2F0aW9uKSxcbiAgICAgIFwicHJvcGVydHlDb25kaXRpb25cIjogc3RyaW5nIChkZXRhaWxlZCBjb25kaXRpb24gYXNzZXNzbWVudCksXG4gICAgICBcImFyY2hpdGVjdHVyYWxTdHlsZVwiOiBzdHJpbmcgKGFyY2hpdGVjdHVyYWwgY2xhc3NpZmljYXRpb24pLFxuICAgICAgXCJ5ZWFyQnVpbHRcIjogc3RyaW5nIChlc3RpbWF0ZWQgY29uc3RydWN0aW9uIHllYXIpLFxuICAgICAgXCJzcXVhcmVGb290YWdlXCI6IHN0cmluZyAoZXN0aW1hdGVkIHNpemUgcmFuZ2UpLFxuICAgICAgXCJsb3RTaXplXCI6IHN0cmluZyAoZXN0aW1hdGVkIGxvdCBkaW1lbnNpb25zKSxcbiAgICAgIFwia2V5VmFsdWVEcml2ZXJzXCI6IHN0cmluZ1tdIChwb3NpdGl2ZSB2YWx1ZSBmYWN0b3JzKSxcbiAgICAgIFwicG90ZW50aWFsQ29uY2VybnNcIjogc3RyaW5nW10gKG5lZ2F0aXZlIHZhbHVlIGZhY3RvcnMpLFxuICAgICAgXCJtYXJrZXRQb3NpdGlvbmluZ1wiOiBzdHJpbmcgKG1hcmtldCBjb21wYXJpc29uIGFzc2Vzc21lbnQpLFxuICAgICAgXCJzdWdnZXN0ZWRVcGdyYWRlc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcInVwZ3JhZGVcIjogc3RyaW5nLFxuICAgICAgICAgIFwicmVhc29uaW5nXCI6IHN0cmluZyxcbiAgICAgICAgICBcImVzdGltYXRlZENvc3RcIjogc3RyaW5nIChkZXRhaWxlZCBjb3N0IHJhbmdlKSxcbiAgICAgICAgICBcImltcGFjdE9uVmFsdWVcIjogc3RyaW5nIChwZXJjZW50YWdlIGltcGFjdCksXG4gICAgICAgICAgXCJwcmlvcml0eVwiOiBzdHJpbmcgKFwiSGlnaFwiLCBcIk1lZGl1bVwiLCBcIkxvd1wiKSxcbiAgICAgICAgICBcInRpbWVsaW5lXCI6IHN0cmluZyAoXCJJbW1lZGlhdGVcIiwgXCJXaXRoaW4gNiBtb250aHNcIiwgXCJMb25nLXRlcm1cIilcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH1cbiAgYDtcbiAgXG4gIGNvbnN0IHVzZUdyb3VuZGluZyA9IGRldGFpbHMuYWRkcmVzcyAmJiBkZXRhaWxzLmFkZHJlc3MudHJpbSgpICE9PSAnJztcblxuICB0cnkge1xuICAgIGNvbnN0IGNvbmZpZyA9IHVzZUdyb3VuZGluZyBcbiAgICAgID8geyB0b29sczogW3sgZ29vZ2xlU2VhcmNoOiB7fSB9XSB9XG4gICAgICA6IHtcbiAgICAgICAgICByZXNwb25zZU1pbWVUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgcmVzcG9uc2VTY2hlbWE6IHZhbHVhdGlvblNjaGVtYSxcbiAgICAgIH07XG4gICAgICBcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFpLm1vZGVscy5nZW5lcmF0ZUNvbnRlbnQoe1xuICAgICAgbW9kZWw6ICdnZW1pbmktMi41LWZsYXNoJyxcbiAgICAgIGNvbnRlbnRzOiB7XG4gICAgICAgIHBhcnRzOiBbLi4uaW1hZ2VQYXJ0cywgeyB0ZXh0OiBwcm9tcHQgfV0sXG4gICAgICB9LFxuICAgICAgY29uZmlnLFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS50ZXh0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyByZXNwb25zZSB0ZXh0IHJlY2VpdmVkIGZyb20gQUkgc2VydmljZS5cIik7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGpzb25UZXh0ID0gcmVzcG9uc2UudGV4dC50cmltKCk7XG4gICAgLy8gSWYgZ3JvdW5kaW5nIGlzIHVzZWQsIHRoZSBtb2RlbCBtaWdodCB3cmFwIHRoZSBKU09OIGluIG1hcmtkb3duIGJhY2t0aWNrcy5cbiAgICBjb25zdCBjbGVhbkpzb25UZXh0ID0ganNvblRleHQucmVwbGFjZSgvXmBgYGpzb25cXHMqfGBgYCQvZywgJycpO1xuICAgIGNvbnN0IHZhbHVhdGlvbkRhdGEgPSBKU09OLnBhcnNlKGNsZWFuSnNvblRleHQpO1xuICAgIFxuICAgIGlmICghdmFsdWF0aW9uRGF0YS5lc3RpbWF0ZWRWYWx1ZVJhbmdlIHx8ICF2YWx1YXRpb25EYXRhLnJlYXNvbmluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmNvbXBsZXRlIHZhbHVhdGlvbiBkYXRhIHJlY2VpdmVkIGZyb20gQUkuXCIpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodXNlR3JvdW5kaW5nKSB7XG4gICAgICBjb25zdCBncm91bmRpbmdDaHVua3MgPSByZXNwb25zZS5jYW5kaWRhdGVzPy5bMF0/Lmdyb3VuZGluZ01ldGFkYXRhPy5ncm91bmRpbmdDaHVua3M7XG4gICAgICBjb25zdCBzb3VyY2VzOiBHcm91bmRpbmdTb3VyY2VbXSA9IGdyb3VuZGluZ0NodW5rc1xuICAgICAgICA/Lm1hcChjaHVuayA9PiBjaHVuay53ZWIpXG4gICAgICAgIC5maWx0ZXIoKHdlYik6IHdlYiBpcyB7IHVyaTogc3RyaW5nOyB0aXRsZTogc3RyaW5nIH0gPT4gISF3ZWIgJiYgISF3ZWIudXJpICYmICEhd2ViLnRpdGxlKSB8fCBbXTtcbiAgICAgIHJldHVybiB7IC4uLnZhbHVhdGlvbkRhdGEsIHNvdXJjZXMgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWF0aW9uRGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY2FsbGluZyBHZW1pbmkgQVBJOlwiLCBlcnJvcik7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IHByb3BlcnR5IHZhbHVhdGlvbjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIGR1cmluZyBwcm9wZXJ0eSB2YWx1YXRpb24uXCIpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVEZXRhaWxlZFJlcG9ydCA9IGFzeW5jICh2YWx1YXRpb246IFZhbHVhdGlvblJlc3VsdCk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gIGNvbnN0IHByb21wdCA9IGBcbiAgICBBcyBhIHNlbmlvciByZWFsIGVzdGF0ZSBhbmFseXN0IHdpdGggMjArIHllYXJzIG9mIGV4cGVyaWVuY2UsIGNyZWF0ZSBhIGNvbXByZWhlbnNpdmUsIHByb2Zlc3Npb25hbCBwcm9wZXJ0eSB2YWx1YXRpb24gcmVwb3J0LiBUaGlzIHJlcG9ydCB3aWxsIGJlIHVzZWQgYnkgcG90ZW50aWFsIGJ1eWVycywgc2VsbGVycywgYW5kIGludmVzdG9ycyBmb3IgY3JpdGljYWwgZGVjaXNpb24tbWFraW5nLiBUaGUgdG9uZSBzaG91bGQgYmUgYXV0aG9yaXRhdGl2ZSwgZGF0YS1kcml2ZW4sIGFuZCBhY3Rpb25hYmxlLlxuXG4gICAgKipDb21wcmVoZW5zaXZlIFByb3BlcnR5IERhdGE6KipcbiAgICAtIFByb3BlcnR5IFR5cGU6ICR7dmFsdWF0aW9uLnByb3BlcnR5VHlwZX1cbiAgICAtIEFkZHJlc3M6ICR7dmFsdWF0aW9uLnByb3BlcnR5RGV0YWlscz8uYWRkcmVzcyB8fCAnTm90IHNwZWNpZmllZCd9XG4gICAgLSBQcm9wZXJ0eSBTaXplOiAke3ZhbHVhdGlvbi5wcm9wZXJ0eURldGFpbHM/LnByb3BlcnR5U2l6ZSA/IGAke3ZhbHVhdGlvbi5wcm9wZXJ0eURldGFpbHMucHJvcGVydHlTaXplfSBzcWZ0YCA6IHZhbHVhdGlvbi5zcXVhcmVGb290YWdlIHx8ICdOb3Qgc3BlY2lmaWVkJ31cbiAgICAtIEJlZHJvb21zOiAke3ZhbHVhdGlvbi5wcm9wZXJ0eURldGFpbHM/LmJlZHJvb21zIHx8ICdOb3Qgc3BlY2lmaWVkJ31cbiAgICAtIEJhdGhyb29tczogJHt2YWx1YXRpb24ucHJvcGVydHlEZXRhaWxzPy5iYXRocm9vbXMgfHwgJ05vdCBzcGVjaWZpZWQnfVxuICAgIC0gQXJjaGl0ZWN0dXJhbCBTdHlsZTogJHt2YWx1YXRpb24uYXJjaGl0ZWN0dXJhbFN0eWxlIHx8ICdOb3Qgc3BlY2lmaWVkJ31cbiAgICAtIFllYXIgQnVpbHQ6ICR7dmFsdWF0aW9uLnllYXJCdWlsdCB8fCAnTm90IHNwZWNpZmllZCd9XG4gICAgLSBMb3QgU2l6ZTogJHt2YWx1YXRpb24ubG90U2l6ZSB8fCAnTm90IHNwZWNpZmllZCd9XG4gICAgLSBFc3RpbWF0ZWQgVmFsdWUgUmFuZ2U6ICQke3ZhbHVhdGlvbi5lc3RpbWF0ZWRWYWx1ZVJhbmdlLm1pbi50b0xvY2FsZVN0cmluZygpfSAtICQke3ZhbHVhdGlvbi5lc3RpbWF0ZWRWYWx1ZVJhbmdlLm1heC50b0xvY2FsZVN0cmluZygpfSAke3ZhbHVhdGlvbi5jdXJyZW5jeX1cbiAgICAtIENvbmZpZGVuY2UgU2NvcmU6ICR7dmFsdWF0aW9uLmNvbmZpZGVuY2VTY29yZX0lXG4gICAgLSBNYXJrZXQgUG9zaXRpb25pbmc6ICR7dmFsdWF0aW9uLm1hcmtldFBvc2l0aW9uaW5nIHx8ICdOb3Qgc3BlY2lmaWVkJ31cbiAgICAtIE92ZXJhbGwgQ29uZGl0aW9uOiAke3ZhbHVhdGlvbi5wcm9wZXJ0eUNvbmRpdGlvbn1cbiAgICBcbiAgICAqKktleSBWYWx1ZSBEcml2ZXJzOioqXG4gICAgJHt2YWx1YXRpb24ua2V5VmFsdWVEcml2ZXJzID8gdmFsdWF0aW9uLmtleVZhbHVlRHJpdmVycy5tYXAoZHJpdmVyID0+IGAtICR7ZHJpdmVyfWApLmpvaW4oJ1xcbicpIDogJ05vdCBzcGVjaWZpZWQnfVxuICAgIFxuICAgICoqUG90ZW50aWFsIENvbmNlcm5zOioqXG4gICAgJHt2YWx1YXRpb24ucG90ZW50aWFsQ29uY2VybnMgPyB2YWx1YXRpb24ucG90ZW50aWFsQ29uY2VybnMubWFwKGNvbmNlcm4gPT4gYC0gJHtjb25jZXJufWApLmpvaW4oJ1xcbicpIDogJ05vbmUgaWRlbnRpZmllZCd9XG4gICAgXG4gICAgKipEZXRlY3RlZCBGZWF0dXJlczoqKlxuICAgICR7dmFsdWF0aW9uLmRldGVjdGVkRmVhdHVyZXMuam9pbignLCAnKX1cbiAgICBcbiAgICAqKkFJIFZhbHVhdGlvbiBBbmFseXNpczoqKlxuICAgICR7dmFsdWF0aW9uLnJlYXNvbmluZ31cbiAgICBcbiAgICAqKlN0cmF0ZWdpYyBJbnZlc3RtZW50IFJlY29tbWVuZGF0aW9uczoqKlxuICAgICR7dmFsdWF0aW9uLnN1Z2dlc3RlZFVwZ3JhZGVzLm1hcCh1ID0+IGAtICoqJHt1LnVwZ3JhZGV9KiogKFByaW9yaXR5OiAke3UucHJpb3JpdHl9LCBUaW1lbGluZTogJHt1LnRpbWVsaW5lfSlcbiAgLSBSZWFzb25pbmc6ICR7dS5yZWFzb25pbmd9XG4gIC0gRXN0aW1hdGVkIENvc3Q6ICR7dS5lc3RpbWF0ZWRDb3N0fVxuICAtIFZhbHVlIEltcGFjdDogJHt1LmltcGFjdE9uVmFsdWV9YCkuam9pbignXFxuXFxuJyl9XG4gICAgXG4gICAgKipNYXJrZXQgUmVzZWFyY2ggU291cmNlczoqKlxuICAgICR7KHZhbHVhdGlvbi5zb3VyY2VzICYmIHZhbHVhdGlvbi5zb3VyY2VzLmxlbmd0aCA+IDApID8gdmFsdWF0aW9uLnNvdXJjZXMubWFwKHMgPT4gYC0gWyR7cy50aXRsZX1dKCR7cy51cml9KWApLmpvaW4oJ1xcbicpIDogJ05vIGV4dGVybmFsIHNvdXJjZXMgY29uc3VsdGVkJ31cblxuICAgICoqUHJvZmVzc2lvbmFsIFJlcG9ydCBTdHJ1Y3R1cmU6KipcbiAgICBDcmVhdGUgYSBjb21wcmVoZW5zaXZlIHJlcG9ydCB3aXRoIHRoZSBmb2xsb3dpbmcgc2VjdGlvbnM6XG4gICAgXG4gICAgMS4gKiojIyBFeGVjdXRpdmUgU3VtbWFyeSoqXG4gICAgICAgLSBQcm9wZXJ0eSBvdmVydmlldyBhbmQga2V5IG1ldHJpY3NcbiAgICAgICAtIEVzdGltYXRlZCB2YWx1ZSByYW5nZSBhbmQgY29uZmlkZW5jZSBsZXZlbFxuICAgICAgIC0gTWFya2V0IHBvc2l0aW9uaW5nIGFuZCBpbnZlc3RtZW50IHBvdGVudGlhbFxuICAgICAgIC0gS2V5IHJlY29tbWVuZGF0aW9ucyBzdW1tYXJ5XG4gICAgXG4gICAgMi4gKiojIyBQcm9wZXJ0eSBBbmFseXNpcyoqXG4gICAgICAgLSBEZXRhaWxlZCBwcm9wZXJ0eSBkZXNjcmlwdGlvbiBhbmQgY2hhcmFjdGVyaXN0aWNzXG4gICAgICAgLSBBcmNoaXRlY3R1cmFsIGFzc2Vzc21lbnQgYW5kIGNvbnN0cnVjdGlvbiBxdWFsaXR5XG4gICAgICAgLSBJbnRlcmlvciBhbmQgZXh0ZXJpb3IgY29uZGl0aW9uIGFuYWx5c2lzXG4gICAgICAgLSBVbmlxdWUgZmVhdHVyZXMgYW5kIGFtZW5pdGllc1xuICAgICAgIC0gU3BhY2UgdXRpbGl6YXRpb24gYW5kIGZ1bmN0aW9uYWwgbGF5b3V0XG4gICAgXG4gICAgMy4gKiojIyBNYXJrZXQgQW5hbHlzaXMgJiBWYWx1YXRpb24qKlxuICAgICAgIC0gTG9jYWwgbWFya2V0IGNvbmRpdGlvbnMgYW5kIHRyZW5kc1xuICAgICAgIC0gQ29tcGFyYWJsZSBwcm9wZXJ0eSBhbmFseXNpcyAoaWYgYXZhaWxhYmxlKVxuICAgICAgIC0gVmFsdWF0aW9uIG1ldGhvZG9sb2d5IGFuZCByYXRpb25hbGVcbiAgICAgICAtIE1hcmtldCBwb3NpdGlvbmluZyBhc3Nlc3NtZW50XG4gICAgICAgLSBSaXNrIGZhY3RvcnMgYW5kIG1hcmtldCBjb25zaWRlcmF0aW9uc1xuICAgIFxuICAgIDQuICoqIyMgSW52ZXN0bWVudCBTdHJhdGVneSoqXG4gICAgICAgLSBQcmlvcml0aXplZCB1cGdyYWRlIHJlY29tbWVuZGF0aW9uc1xuICAgICAgIC0gQ29zdC1iZW5lZml0IGFuYWx5c2lzIGZvciBlYWNoIGltcHJvdmVtZW50XG4gICAgICAgLSBUaW1lbGluZSBhbmQgaW1wbGVtZW50YXRpb24gc3RyYXRlZ3lcbiAgICAgICAtIEV4cGVjdGVkIHJldHVybiBvbiBpbnZlc3RtZW50XG4gICAgICAgLSBNYXJrZXQgdGltaW5nIGNvbnNpZGVyYXRpb25zXG4gICAgXG4gICAgNS4gKiojIyBSaXNrIEFzc2Vzc21lbnQqKlxuICAgICAgIC0gUG90ZW50aWFsIGNvbmNlcm5zIGFuZCBtaXRpZ2F0aW9uIHN0cmF0ZWdpZXNcbiAgICAgICAtIE1hcmtldCByaXNrcyBhbmQgZWNvbm9taWMgZmFjdG9yc1xuICAgICAgIC0gUHJvcGVydHktc3BlY2lmaWMgY2hhbGxlbmdlc1xuICAgICAgIC0gSW52ZXN0bWVudCB0aW1lbGluZSByZWNvbW1lbmRhdGlvbnNcbiAgICBcbiAgICA2LiAqKiMjIENvbmNsdXNpb24gJiBOZXh0IFN0ZXBzKipcbiAgICAgICAtIEludmVzdG1lbnQgcmVjb21tZW5kYXRpb24gc3VtbWFyeVxuICAgICAgIC0gS2V5IGFjdGlvbiBpdGVtcyBmb3IgYnV5ZXJzL3NlbGxlcnNcbiAgICAgICAtIFByb2Zlc3Npb25hbCBkaXNjbGFpbWVyIGFuZCBsaW1pdGF0aW9uc1xuICAgICAgIC0gUmVjb21tZW5kYXRpb24gZm9yIHByb2Zlc3Npb25hbCBhcHByYWlzYWxcblxuICAgICoqUmVwb3J0IFJlcXVpcmVtZW50czoqKlxuICAgIC0gVXNlIHByb2Zlc3Npb25hbCByZWFsIGVzdGF0ZSB0ZXJtaW5vbG9neVxuICAgIC0gSW5jbHVkZSBzcGVjaWZpYyBkYXRhIHBvaW50cyBhbmQgbWV0cmljc1xuICAgIC0gUHJvdmlkZSBhY3Rpb25hYmxlIGluc2lnaHRzIGFuZCByZWNvbW1lbmRhdGlvbnNcbiAgICAtIE1haW50YWluIG9iamVjdGl2ZSwgYW5hbHl0aWNhbCB0b25lXG4gICAgLSBJbmNsdWRlIHJlbGV2YW50IG1hcmtldCBjb250ZXh0IGFuZCB0cmVuZHNcbiAgICAtIEZvcm1hdCB3aXRoIGNsZWFyIGhlYWRpbmdzIGFuZCBidWxsZXQgcG9pbnRzXG4gICAgLSBUYXJnZXQgbGVuZ3RoOiAxLDUwMC0yLDUwMCB3b3Jkc1xuXG4gICAgR2VuZXJhdGUgb25seSB0aGUgcmVwb3J0IHRleHQgd2l0aG91dCBhbnkgYWRkaXRpb25hbCBjb21tZW50YXJ5LlxuICBgO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhaS5tb2RlbHMuZ2VuZXJhdGVDb250ZW50KHtcbiAgICAgIG1vZGVsOiAnZ2VtaW5pLTIuNS1mbGFzaCcsXG4gICAgICBjb250ZW50czogcHJvbXB0LFxuICAgIH0pO1xuICAgIFxuICAgIGlmICghcmVzcG9uc2UudGV4dCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcmVzcG9uc2UgdGV4dCByZWNlaXZlZCBmcm9tIEFJIHNlcnZpY2UuXCIpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVzcG9uc2UudGV4dDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2VuZXJhdGluZyBkZXRhaWxlZCByZXBvcnQ6XCIsIGVycm9yKTtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZW5lcmF0ZSBkZXRhaWxlZCByZXBvcnQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCB3aGlsZSBnZW5lcmF0aW5nIHRoZSByZXBvcnQuXCIpO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbIkdvb2dsZUdlbkFJIiwiVHlwZSIsIkFQSV9LRVkiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfR0VNSU5JX0FQSV9LRVkiLCJFcnJvciIsImFpIiwiYXBpS2V5IiwidmFsdWF0aW9uU2NoZW1hIiwidHlwZSIsIk9CSkVDVCIsInByb3BlcnRpZXMiLCJlc3RpbWF0ZWRWYWx1ZVJhbmdlIiwibWluIiwiTlVNQkVSIiwiZGVzY3JpcHRpb24iLCJtYXgiLCJyZXF1aXJlZCIsImNvbmZpZGVuY2VTY29yZSIsImN1cnJlbmN5IiwiU1RSSU5HIiwicmVhc29uaW5nIiwiZGV0ZWN0ZWRGZWF0dXJlcyIsIkFSUkFZIiwiaXRlbXMiLCJwcm9wZXJ0eVR5cGUiLCJwcm9wZXJ0eUNvbmRpdGlvbiIsImFyY2hpdGVjdHVyYWxTdHlsZSIsInllYXJCdWlsdCIsInNxdWFyZUZvb3RhZ2UiLCJsb3RTaXplIiwia2V5VmFsdWVEcml2ZXJzIiwicG90ZW50aWFsQ29uY2VybnMiLCJtYXJrZXRQb3NpdGlvbmluZyIsInN1Z2dlc3RlZFVwZ3JhZGVzIiwidXBncmFkZSIsImVzdGltYXRlZENvc3QiLCJpbXBhY3RPblZhbHVlIiwicHJpb3JpdHkiLCJ0aW1lbGluZSIsImdldFByb3BlcnR5VmFsdWF0aW9uIiwiaW1hZ2VzIiwiZGV0YWlscyIsImltYWdlUGFydHMiLCJtYXAiLCJiYXNlNjREYXRhIiwiaW5saW5lRGF0YSIsIm1pbWVUeXBlIiwiZGF0YSIsInByb21wdCIsImFkZHJlc3MiLCJwcm9wZXJ0eVNpemUiLCJiZWRyb29tcyIsImJhdGhyb29tcyIsImFkZGl0aW9uYWxOb3RlcyIsInVzZUdyb3VuZGluZyIsInRyaW0iLCJjb25maWciLCJ0b29scyIsImdvb2dsZVNlYXJjaCIsInJlc3BvbnNlTWltZVR5cGUiLCJyZXNwb25zZVNjaGVtYSIsInJlc3BvbnNlIiwibW9kZWxzIiwiZ2VuZXJhdGVDb250ZW50IiwibW9kZWwiLCJjb250ZW50cyIsInBhcnRzIiwidGV4dCIsImpzb25UZXh0IiwiY2xlYW5Kc29uVGV4dCIsInJlcGxhY2UiLCJ2YWx1YXRpb25EYXRhIiwiSlNPTiIsInBhcnNlIiwiZ3JvdW5kaW5nQ2h1bmtzIiwiY2FuZGlkYXRlcyIsImdyb3VuZGluZ01ldGFkYXRhIiwic291cmNlcyIsImNodW5rIiwid2ViIiwiZmlsdGVyIiwidXJpIiwidGl0bGUiLCJlcnJvciIsImNvbnNvbGUiLCJtZXNzYWdlIiwiZ2VuZXJhdGVEZXRhaWxlZFJlcG9ydCIsInZhbHVhdGlvbiIsInByb3BlcnR5RGV0YWlscyIsInRvTG9jYWxlU3RyaW5nIiwiZHJpdmVyIiwiam9pbiIsImNvbmNlcm4iLCJ1IiwibGVuZ3RoIiwicyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./services/geminiService.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/tslib","vendor-chunks/cookie","vendor-chunks/webidl-conversions","vendor-chunks/google-auth-library","vendor-chunks/ws","vendor-chunks/gaxios","vendor-chunks/uuid","vendor-chunks/jws","vendor-chunks/json-bigint","vendor-chunks/google-logging-utils","vendor-chunks/gcp-metadata","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/@google","vendor-chunks/gtoken","vendor-chunks/safe-buffer","vendor-chunks/jwa","vendor-chunks/extend","vendor-chunks/buffer-equal-constant-time","vendor-chunks/bignumber.js","vendor-chunks/base64-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvaluation%2Froute&page=%2Fapi%2Fvaluation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvaluation%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDesktop%2FProjects%2Fvisionvalu_-ai-property-valuation&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();