(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[959],{1483:function(e,t,r){Promise.resolve().then(r.bind(r,9084)),Promise.resolve().then(r.bind(r,3072))},3072:function(e,t,r){"use strict";r.d(t,{default:function(){return u}});var a=r(7437),n=r(2265),s=r(6281),i=r(8020),l=r(9679),o=r(8603),c=r(7212);let d=e=>new Promise((t,r)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=()=>{t(a.result.split(",")[1])},a.onerror=e=>r(e)});function u(){let{user:e}=(0,s.a)(),[t,r]=(0,n.useState)([]),[u,h]=(0,n.useState)({}),[p,f]=(0,n.useState)(null),[m,y]=(0,n.useState)(!1),[x,k]=(0,n.useState)(null),[v,g]=(0,n.useState)(!1),[w,b]=(0,n.useState)(null),[j,N]=(0,n.useState)(!1),Z=(0,n.useCallback)(e=>{r(e)},[]),M=(0,n.useCallback)(e=>{h(e)},[]),C=async()=>{if(0===t.length){k("Please upload at least one image.");return}if(!e||e.credits<5){k("Insufficient credits. You need 5 credits for a property valuation.");return}y(!0),k(null),f(null);try{let e=await Promise.all(t.map(d)),r=await fetch("/api/valuation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:e,propertyDetails:u})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to get valuation")}let a=await r.json();f(a.report)}catch(t){let e=t instanceof Error?t.message:"An unexpected error occurred.";k("Valuation failed: ".concat(e))}finally{y(!1)}},A=async e=>{g(!0),k(null);try{let t=await fetch("/api/valuation/generate-report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to generate report")}let r=await t.json();b(r.report),N(!0)}catch(t){let e=t instanceof Error?t.message:"An unexpected error occurred.";k("Failed to generate detailed report: ".concat(e))}finally{g(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Property Valuation"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Upload property images and get an AI-powered valuation. This will use 5 credits."}),e&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsxs)("p",{className:"text-sm text-blue-700",children:["You have ",(0,a.jsxs)("strong",{children:[e.credits," credits"]})," remaining."]})})]})}),(0,a.jsx)(i.Z,{onImagesChange:Z,onDetailsChange:M,onSubmit:C,isLoading:m}),x&&(0,a.jsxs)("div",{className:"mt-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:[(0,a.jsx)("p",{className:"font-semibold",children:"Error"}),(0,a.jsx)("p",{children:x})]}),m&&(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(c.Z,{})}),p&&(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(l.Z,{report:p,onGenerateReport:A,isGeneratingReport:v})})]})}),(0,a.jsx)(o.Z,{isOpen:j,onClose:()=>N(!1),reportText:w})]})}},9205:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var a=r(2265);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:d="",children:u,iconNode:h,...p}=e;return(0,a.createElement)("svg",{ref:t,...c,width:n,height:n,stroke:r,strokeWidth:i?24*Number(s)/Number(n):s,className:l("lucide",d),...!u&&!o(p)&&{"aria-hidden":"true"},...p},[...h.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{className:o,...c}=r;return(0,a.createElement)(d,{ref:s,iconNode:t,className:l("lucide-".concat(n(i(e))),"lucide-".concat(e),o),...c})});return r.displayName=i(e),r}},9232:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]])},8736:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},4938:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},7692:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},8293:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},8728:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2369:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[338,84,526,971,117,744],function(){return e(e.s=1483)}),_N_E=e.O()}]);