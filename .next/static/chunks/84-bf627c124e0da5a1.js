"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84],{9084:function(e,r,s){s.d(r,{default:function(){return f}});var t=s(7437),a=s(2265),l=s(6281),i=s(9376),n=s(4938),o=s(8736),d=s(9232),c=s(8728),u=s(2489),m=s(2369),x=s(7692),h=s(8293);function f(e){let{children:r}=e,[s,f]=(0,a.useState)(!1),{user:g,signOut:p}=(0,l.a)(),b=(0,i.useRouter)(),v=async()=>{await p(),b.push("/")},j=[{name:"Dashboard",href:"/dashboard",icon:n.Z},{name:"Valuation",href:"/dashboard/valuation",icon:o.Z},{name:"Reports",href:"/dashboard/reports",icon:o.Z},{name:"Credits",href:"/dashboard/credits",icon:d.Z},{name:"Settings",href:"/dashboard/settings",icon:c.Z}];return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[(0,t.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden transition-opacity duration-300 ".concat(s?"block":"hidden"),children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>f(!1)}),(0,t.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-72 flex-col bg-white/95 backdrop-blur-md slide-in",children:[(0,t.jsxs)("div",{className:"flex h-16 items-center justify-between px-6 border-b border-gray-200/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-bold text-sm",children:"V"})}),(0,t.jsx)("h1",{className:"text-xl font-bold gradient-text",children:"HomeWorth"})]}),(0,t.jsx)("button",{onClick:()=>f(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:(0,t.jsx)(u.Z,{className:"h-5 w-5"})})]}),(0,t.jsx)("nav",{className:"flex-1 space-y-2 px-4 py-6",children:j.map((e,r)=>{let s=e.icon;return(0,t.jsxs)("a",{href:e.href,className:"group flex items-center px-4 py-3 text-sm font-medium text-gray-600 rounded-xl hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 hover:text-gray-900 transition-all duration-200 hover:shadow-sm",style:{animationDelay:"".concat(100*r,"ms")},children:[(0,t.jsx)(s,{className:"mr-3 h-5 w-5 group-hover:text-blue-600 transition-colors duration-200"}),e.name]},e.name)})}),(0,t.jsxs)("div",{className:"border-t border-gray-200/50 p-4 bg-gradient-to-r from-slate-50 to-blue-50",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:(0,t.jsx)(m.Z,{className:"h-5 w-5 text-white"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:(null==g?void 0:g.full_name)||(null==g?void 0:g.email)}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(d.Z,{className:"h-3 w-3 text-yellow-500"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[null==g?void 0:g.credits," credits"]})]})]})]}),(0,t.jsxs)("button",{onClick:v,className:"flex w-full items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-red-50 hover:text-red-600 transition-all duration-200",children:[(0,t.jsx)(x.Z,{className:"mr-3 h-4 w-4"}),"Sign out"]})]})]})]}),(0,t.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-72 lg:flex-col",children:(0,t.jsxs)("div",{className:"flex flex-col flex-grow bg-white/80 backdrop-blur-md border-r border-gray-200/50 shadow-xl",children:[(0,t.jsx)("div",{className:"flex h-16 items-center px-6 border-b border-gray-200/50",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-bold text-sm",children:"V"})}),(0,t.jsx)("h1",{className:"text-xl font-bold gradient-text",children:"HomeWorth"})]})}),(0,t.jsx)("nav",{className:"flex-1 space-y-2 px-4 py-6",children:j.map((e,r)=>{let s=e.icon;return(0,t.jsxs)("a",{href:e.href,className:"group flex items-center px-4 py-3 text-sm font-medium text-gray-600 rounded-xl hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 hover:text-gray-900 transition-all duration-200 hover:shadow-sm",style:{animationDelay:"".concat(100*r,"ms")},children:[(0,t.jsx)(s,{className:"mr-3 h-5 w-5 group-hover:text-blue-600 transition-colors duration-200"}),e.name]},e.name)})}),(0,t.jsxs)("div",{className:"border-t border-gray-200/50 p-4 bg-gradient-to-r from-slate-50 to-blue-50",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:(0,t.jsx)(m.Z,{className:"h-5 w-5 text-white"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:(null==g?void 0:g.full_name)||(null==g?void 0:g.email)}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(d.Z,{className:"h-3 w-3 text-yellow-500"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[null==g?void 0:g.credits," credits"]})]})]})]}),(0,t.jsxs)("button",{onClick:v,className:"flex w-full items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-red-50 hover:text-red-600 transition-all duration-200",children:[(0,t.jsx)(x.Z,{className:"mr-3 h-4 w-4"}),"Sign out"]})]})]})}),(0,t.jsxs)("div",{className:"lg:pl-72",children:[(0,t.jsxs)("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200/50 bg-white/80 backdrop-blur-md px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[(0,t.jsx)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden hover:bg-gray-100 rounded-lg transition-colors duration-200",onClick:()=>f(!0),children:(0,t.jsx)(h.Z,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[(0,t.jsx)("div",{className:"flex flex-1"}),(0,t.jsx)("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-x-3 bg-gradient-to-r from-yellow-50 to-orange-50 px-4 py-2 rounded-full border border-yellow-200",children:[(0,t.jsx)(d.Z,{className:"h-5 w-5 text-yellow-500"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:null==g?void 0:g.credits}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"credits"})]})})]})]}),(0,t.jsx)("main",{className:"py-8",children:(0,t.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"fade-in",children:r})})})]})]})}},6281:function(e,r,s){s.d(r,{AuthProvider:function(){return n},a:function(){return o}});var t=s(7437),a=s(2265),l=s(970);let i=(0,a.createContext)(void 0);function n(e){let{children:r}=e,[s,n]=(0,a.useState)(null),[o,d]=(0,a.useState)(!0),c=(0,l.e)();(0,a.useEffect)(()=>{(async()=>{let{data:{session:e}}=await c.auth.getSession();(null==e?void 0:e.user)&&await u(e.user.id),d(!1)})();let{data:{subscription:e}}=c.auth.onAuthStateChange(async(e,r)=>{(null==r?void 0:r.user)?await u(r.user.id):n(null),d(!1)});return()=>e.unsubscribe()},[]);let u=async e=>{try{let{data:a,error:l}=await c.from("users").select("*").eq("id",e).single();if(l&&"PGRST116"===l.code){let{data:e}=await c.auth.getUser();if(e.user){var r,s,t;let{data:l,error:i}=await c.from("users").insert({id:e.user.id,email:e.user.email,full_name:(null===(r=e.user.user_metadata)||void 0===r?void 0:r.full_name)||(null===(s=e.user.user_metadata)||void 0===s?void 0:s.name)||(null===(t=e.user.email)||void 0===t?void 0:t.split("@")[0]),credits:5,total_credits_purchased:0}).select().single();if(i){console.error("Error creating user profile:",i);return}a=l}}else if(l){console.error("Error fetching user profile:",l);return}a&&n(a)}catch(e){console.error("Error in fetchUserProfile:",e)}},m=async(e,r,s)=>{let{data:t,error:a}=await c.auth.signUp({email:e,password:r,options:{data:{full_name:s}}});if(!a&&t.user)try{await c.from("users").insert({id:t.user.id,email:t.user.email,full_name:s,credits:5,total_credits_purchased:0})}catch(e){console.error("Error creating user profile:",e)}return{error:a}},x=async(e,r)=>{let{error:s}=await c.auth.signInWithPassword({email:e,password:r});return{error:s}},h=async()=>{let{error:e}=await c.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/dashboard")}});return{error:e}},f=async()=>{await c.auth.signOut(),n(null)},g=async e=>{if(!s)return{error:"No user logged in"};let{error:r}=await c.from("users").update(e).eq("id",s.id);return r||n({...s,...e}),{error:r}},p=async()=>{if(s)try{let{data:e,error:r}=await c.from("users").select("*").eq("id",s.id).single();!r&&e&&n(e)}catch(e){console.error("Error refreshing user data:",e)}};return(0,t.jsx)(i.Provider,{value:{user:s,loading:o,signUp:m,signIn:x,signInWithGoogle:h,signOut:f,updateProfile:g,refreshUser:p},children:r})}function o(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},970:function(e,r,s){s.d(r,{e:function(){return a}});var t=s(338);function a(){return(0,t.createBrowserClient)("https://bbbengshbvpqxtzrphov.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiYmVuZ3NoYnZwcXh0enJwaG92Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEzNzcxNjYsImV4cCI6MjA3Njk1MzE2Nn0.CkmmMBMjbQlJgsgMjRLGfjE6fO-BXiis8nZflT16VX8")}}}]);